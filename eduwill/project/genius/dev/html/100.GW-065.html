<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>에듀윌 그룹웨어(Genius)</title>

<!-- favicon files -->
<link rel="Bookmark Icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" />
<link rel="icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />

<!-- css files -->
<!-- layout css -->
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/plugins/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/css/essentials.css" />
<link rel="stylesheet" href="css/genius.css" />


<!-- javascript files -->
<script type="text/javascript">var plugin_path = '//img.eduwill.net/resources/kpi/live/plugins/';</script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-2.2.3.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-ui-1.12.1.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/jquery.easyui.min.js" type="text/javascript" ></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap.datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/ajaxUtil.js" type="text/javascript"></script>

<!-- validation -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.form.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.validation.min.js" type="text/javascript"></script>

<script src="//img.eduwill.net/resources/kpi/live/js/custom.js?v=5a2d148c09b00" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/common.js?v=5ad59eb6c6f40" type="text/javascript"></script>

<!-- 토스트메시지 -->
<link href="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.css" rel="stylesheet" type="text/css" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.js" type="text/javascript"></script>

<!-- 컨펌모달 -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.css">
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.js"></script>

<!-- print -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/printThis/printThis.js"></script>

<!-- editable -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap-editable.min.js"></script>

<!-- Fullcalendar -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.css" />
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.print.css" media="print" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/moment.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/lang-all.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/gcal.js" type="text/javascript"></script>

<!-- CKEditor -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/ckeditor.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/adapters/jquery.js"></script>

<script type="text/javascript">
	function pagePrint(){
		$('#pagePrint').printThis();
	}

	$(document).ready(function() {
		/** Bootstrap Tooltip **/ 
		$("[data-toggle=tooltip]").tooltip();
	})

</script>

</head>

<body class="body-sub body-genius">

<!-- wrapper -->
<div id="wrapper" class="clearfix">

	<!-- hd-wrap -->
    <section class="hd-wrap">
        <div class="hd-wrap-inner">
            <div class="logo">
                <a href="">지니어스</a>
            </div>
            <div class="gnb">
                <ul>
                    <li><a href="">전자결재</a></li>
                    <li><a href="">전사공지</a></li>
                    <li><a href="">업무요청</a></li>
                    <li><a href="">인사관리</a></li>
                    <li><a href="">지원관리</a></li>
                </ul>
            </div>
            <div class="comp-right">
                
                <div class="logout">
                    <button class="btn btn-g-link">로그아웃</button>
                </div>
                <div class="state">
                    <span onclick="$(this).next('.menu-tootip').fadeIn(100);"><i class="state-1"></i> 근무중</span>
                    <!--
                    <span><i class="state-2"></i> 자리비움</span>
                    <span><i class="state-3"></i> 로그오프</span>
                    -->
                    <div class="menu-tootip" style="display: none;" onclick="$(this).fadeOut(100);">
                        <div class="menu-tootip-inner">
                            <div class="link"><a href="#"><i class="state-1"></i> 근무중</a></div>
                            <div class="link"><a href="#"><i class="state-2"></i> 자리비움</a></div>
                            <div class="link"><a href="#"><i class="state-3"></i> 로그오프</a></div>
                        </div>
                    </div>
                </div> 
                <div class="organization">
                    <span><button class="btn btn-g-link btn-setting">관리자</button></span>
                    <span><button class="btn btn-g-link btn-person">조직도</button></span>
                </div>               
            </div>
        </div>
    </section>
    <div class="hd-wrap-expand" style="display: none;">
        <div class="hd-wrap-expand-inner">
            <div class="link">
                <a herf="">결재문서 작성</a>
                <a herf="">결재하기</a>
                <a herf="">수신함</a>
                <a herf="">매출/예산 계획 제출</a>
            </div>
            <div class="link">
                <a herf="">공지사항</a>
                <a herf="">에듀윌러 소식</a>
                <a herf="">에듀윌 스타</a>
                <a herf="">꿈의 직장</a>
            </div>
            <div class="link">
                <a herf="">마케팅</a>
                <a herf="">총무</a>
                <a herf="">IT</a>
                <a herf="">법무</a>
            </div>
            <div class="link">
                <a herf="">인사정보</a>
                <a herf="">평가</a>
                <a herf="">교육</a>
                <a herf="">자주 묻는 질문</a>
            </div>
            <div class="link">
                <a herf="">힐링큐브</a>
                <a herf="">E-스퀘어</a>
                <a herf="">차량배차</a>
                <a herf="">마음,쉼</a>
            </div>
        </div>
    </div>
    <!-- // hd-wrap -->

	<!-- aside -->
	<aside id="aside">
		<div class="aside-loaction">
			<strong>전사공지</strong>
			<button class="btn-collapse">접기</button>
		</div>
		<nav id="sideNav">
			<ul class="nav nav-list d1">
				<li class="d1 el_primary menu-open active">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-gears"></i>
						<span>공지사항</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2 active">
							<span>업적/역량</span>
							<ul class="d3"><!-- 3depth -->
								<li class="d3 active">
									<a href="javascript:;" class="d3">전체공지
										<!-- <span class="label label-number">8</span> -->
									</a>
								</li>
								<li class="d3">
									<a href="javascript:;" class="d3">평가목표 관리</a>
								</li>
							</ul><!-- // 3depth -->
						</li>
					</ul><!-- // 2depth -->
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-balance-scale"></i>
						<span>에듀윌러 소식</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-pencil-square-o"></i>
						<span>에듀윌 스타</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-table"></i>
						<span>꿈의직장</span></span>
					</a>
				</li>
			</ul>
		</nav>
	</aside>
	<div id="expand-wrap" style="display: none;">
		<button class="btn-expand">열기</button>
	</div>
	<!-- // aside -->

	<!-- middle -->	
	<section id="middle">
		<div id="content" class="height-full padding-20">
			<div class="container section-search-form section-search-form-bg">
				<div class="middle-location">
					<a href="/" class="home">홈</a>
					<a href="#">평가</a>
					<a href="#">인턴 업무실적표</a>
				</div>
			</div>

			<form name="frm1" id="frm1" method="post" action="">
				<input type="hidden" name="emp_id" id="emp_id" value="hkkim5">
			</form>
			<div class="container section-performance nopadding">
				<div class="panel-body" id="divTabBody">
		
		
		
		
		
		
		
		
		<script type="text/javascript">
			var _assess_status = "";
			var _assnth = "";
		
			$(document).ready(function() {
				
				var isExpired = "0";
				if(isExpired == "1") {
					fnc_divDimmed("#divTabBody", "인턴기간 종료");
				}
				
				//추가 버튼 클릭
				$("#frm2").on("click", "button[name='btnAdd']", function () {
					fnc_appendRow();
				});	
				
				//삭제 버튼 클릭
				$("#frm2").on("click", "button[name='btnRemove']", function () {
					fnc_removeRow(this);
				});
				
				//저장 버튼 클릭
				$("#btnSave").on("click", function() {			
					if($("#frm2 #file1").val() != '') {
						if(!fnc_checkPTFile()) {
							return false;
						}
					}
					fnc_save();			
				});
				
				//툴팁효과
				jQuery("[data-toggle=tooltip]").tooltip();
				
				//textarea 입력
				$("#frm2").on("keyup", "textarea", function(e) {
					fnc_textareaResize(this);
				});
				
				//컨텐츠 높이 마추기
				$("#frm2 textarea").each(function() {
					fnc_textareaResize(this);
				});
				
				//PT 파일 삭제
				$("#btnRemoveForPTFile").on("click", function() {
					$("#frm2 #removePTFile").val("Y");
				});
			});
			
			//추가
			function fnc_appendRow() {
				var newRow = $("#tblList tbody tr").last().clone();
				newRow.find("button[name='btnAdd']").hide();
				newRow.find("button[name='btnRemove']").show();
				newRow.find("input[name='seq']").val(fnc_nextSeq());
				newRow.find("input[name='from_db']").val("N");
				newRow.find("textarea[name='scope']").val("");
				newRow.find("textarea[name='good']").val("");
				newRow.find("textarea[name='bad']").val("");
				
				$("#tblList tbody tr").last().after(newRow);
			}
			
			//삭제
			function fnc_removeRow(ele) {
				bConfirm("항목을 삭제 하시겠습니까?").done(function(s) {
					if(s) {
						var intn_idx = $("#frm2 input[name='intn_idx']").val();
						var seq = $(ele).parents('tr').find("input[name='seq']").val();	
						var from_db = $("#frm2 input[name='from_db']").val();
						
						if(from_db == "Y") {
							$.ajax({
								type:"post"
								,url:"/intern/selfass/ajaxRemoveAchievementItem"
								,data: { intn_idx : intn_idx, seq : seq }
								,dataType: "json"
								,success: function(data) {
									if(data.result == 1) {
										$(ele).parents('tr').remove();
										fnc_toastMsgForResult("삭제 되었습니다.");
									} else {
										fnc_toastMsgForWarning(data.resultMsg);
									}
								}
								,error: function(responseJSON, status, err) {				    
								}
								,complete: function() {
								}
							});	
						} else {
							$(ele).parents('tr').remove();
						}
					}
				});
			}
			
			//저장
			function fnc_save() {
				fnc_divDimmed2("#divTabBody");
				var frm2 = document.getElementById("frm2");
				var dataArray = new FormData(frm2);
				
				$.ajax({
					type : "post",
					url:"/intern/selfass/ajaxSaveAchievement",
					data : dataArray,
					dataType : "json",
					enctype : 'multipart/form-data',
					processData : false,
					contentType : false,
					success : function(data) {
						if(data.result == 1) {
							fnc_toastMsgForResult("저장 되었습니다.");
							fnc_getTabBody();		
						} else if(data.result == -1) {
							fnc_toastMsgForWarning("허용되지 않는 파일입니다.");
						}
					},
					error : function(data, status, err) {
						fnc_ajaxErrorHandle(data, status, err);
					}
					,complete : function() {
						fnc_divDimmedRemove("#content");
					}
				});
			}
			
			// 다음 seq 번호 반환
			function fnc_nextSeq() {
				var maxValue = 0;
				var currentValue = 0;
				 
				$("input[name=seq]").each(function(i) {
					currentValue = parseInt($(this).val());
					if(maxValue < currentValue) {
						maxValue = currentValue;
					}
				});
				 
				return parseInt(maxValue) + 1;
			}
			
			// textarea resize
			function fnc_textareaResize(ele) {
				if($(ele).prop('scrollHeight')-8 > 70) {		
					$(ele).height(1).height($(ele).prop('scrollHeight')-8);
				}
			}
			
			//PT자료 유효성 확인
			function fnc_checkPTFile() {
				
				var fi = document.getElementById("file1");
				
				if(fi.files.length > 0) {
					//type 체크
					var type = fi.files[0].type;
					
					var allowType = [
						'application/pdf', 
						'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 
						'application/vnd.ms-powerpoint', 'application/vnd.openxmlformats-officedocument.presentationml.presentation', 
						'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 
						'application/haansofthwp'
					];
					if(allowType.indexOf(type) == -1) {
						fnc_toastMsgForWarning("파일은 PDF, PPT, PPTX, 엑셀, 한글, 워드 형식만 가능합니다.");
						fi.value = "";
						$(".upload-name").val("");
						return false;
					}
					
					//size 체크
					var size = fi.files[0].size;
					var allowSize = 15728640; //15MB
					if(allowSize < size) {
						fnc_toastMsgForWarning("파일 용량은 최대 15MB 입니다.");
						fi.value = "";
						$(".upload-name").val("");
						return false;
					}
					
					//파일명 출력
					$(".upload-name").val(fi.files[0].name);
					$("#frm2 input[name='removePTFile']").val("N");
				} else {
					$(".upload-name").val('');
				}
				
				return true;
			}
			
			//PT 파일 다운로드
			function fnc_ptFileDownload() {
				bConfirm("PT 자료를  다운로드 하시겠습니까?").done(function(s) {
					if(s) {
						$("#frmFileDL").attr("action", "/intern/selfass/fileDownloadForPT").submit();
					}
				});
			}
		</script>
		
		<form name="frm2" id="frm2" method="post" action="">
			<input type="hidden" name="intn_idx" value="249">
			<input type="hidden" name="removePTFile" id="removePTFile" value="">	
			<div class="table-responsive table-basic"><!-- table-basic -->
				<table class="table table-bordered table-row" summary="소속, 이름/직책, 입사일, 작성일, 1차 평가자, 2차 평가자로 구분되는 표">
					<caption>기본정보</caption>
					<colgroup>
						<col style="width: 15%;">
						<col style="width: 35%;">
						<col style="width: 15%;">
						<col style="width: 35%;">
					</colgroup>
					<tbody>
						<tr><!-- row -->
							<th scope="row">소속</th>
							<td class="team">플랫폼개발2팀</td>
							<th scope="row">이름 / 직책</th>
							<td class="name">김현경 매니저</td>
						</tr>
						<tr><!-- row -->
							<th scope="row">입사일</th>
							<td class="date">2021-02-01</td>
							<th scope="row">작성일</th>
							<td class="date">-</td>
						</tr>
						<tr><!-- row -->
							<th scope="row">1차 평가자</th>
							<td class="assessor-1st">양민희 매니저</td>
							<th scope="row">2차 평가자</th>
							<td class="assessor-2nd">-</td>
						</tr>
					</tbody>
				</table>
			</div><!-- // table-basic -->
		
			<div class="alert alert-mini alert-warning padding-15">
				<p>※ 업무실적은 평가기간 동안 업무성과 및 태도에 대하여 사실과 결과 위주로 작성해주시기 바랍니다. (감정적, 추상적 기술 자제)</p>
			</div>
		
			<div class="section-title">
				<h3 class="title">업무실적</h3>
			</div>
		
			<div class="table-responsive table-performance"><!-- table-performance -->
				<table cellpadding="0" cellspacing="0" class="table table-bordered table-col" summary="업무구분, 업무실적(잘한 점), 개선이 필요한 점, 관리로 구분되는 표" id="tblList">
					<caption>업무실적</caption>
					<colgroup>
						<col style="width: 25%;">
						<col style="width: auto;">
						<col style="width: 26%;">
						<col style="width: 5%;">
					</colgroup>
					<thead>
						<tr>
							<th scope="col">업무구분</th>
							<th scope="col">업무실적(잘한 점)</th>
							<th scope="col">개선이 필요한 점</th>
							<th scope="col">관리</th>
						</tr>
					</thead>
					<tbody>
						
						
							
							
								<tr>
									<td class="work">
										<input type="hidden" name="seq" value="1">
										<input type="hidden" name="from_db" value="N">
										<textarea name="scope" class="text form-control full"></textarea>
									</td>
									<td class="result">
										<textarea name="good" class="text form-control full"></textarea>
									</td>
									<td class="etc">
										<textarea name="bad" class="text form-control full"></textarea>
									</td>
									<td class="action">
										<button type="button" class="btn btn-primary text-center" name="btnAdd">
											<i class="fa fa-plus nopadding"><span class="sr-only">항목 추가</span></i>
										</button>
										<button type="button" class="btn btn-danger text-center" name="btnRemove" style="display:none;">
											<i class="fa fa-minus nopadding"><span class="sr-only">항목 제거</span></i>
										</button>
									</td>
								</tr>
							
						
						
					</tbody>
				</table>
			</div><!-- // table-performance -->
		
			<div class="section-title">
				<h3 class="title">
					<strong data-toggle="tooltip" data-placement="right" title="" data-original-title="주제: 인턴 근무기간 동안 본인이 달성한 업무성과 및 개선사항
		파일 용량 은 최대 15MB 이며, PDF, PPT, PPTX, 엑셀, 한글, 워드  파일이 첨부 가능합니다.">
						PT자료 등록 <i class="fa fa-exclamation-circle"><em class="sr-only">알림</em></i>
					</strong>
				</h3>
			</div>
		
			<div class="margin-bottom-30 padding-20 border border-silver bg-white">
				<div class="fancy-file-upload">
					<i class="fa fa-upload"></i>
					<input type="file" id="file1" class="form-control" name="file1" accept="application/pdf,
							application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
							application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.presentationml.presentation,
							application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document,
							application/haansofthwp" onchange="fnc_checkPTFile();">
					<input type="text" class="form-control upload-name" placeholder="no file selected" readonly="">
					<span class="button">파일찾기</span>
				</div>
				
				
				
			</div>
		
			<div class="margin-top-50 text-center">
				<button type="button" class="btn btn-primary btn-lg width-150" id="btnSave">저장</button>
			</div>
			<input type="hidden" name="dummy" value="go">
		</form>
		
		<form name="frmFileDL" id="frmFileDL" method="post" action="">
			<input type="hidden" name="intn_idx" value="">
			<input type="hidden" name="emp_id" value="hkkim5">
		</form>					</div>
			</div>
		</div>
	</section>
	<!-- // middle -->
</div>
<!-- // wrapper -->

</body>
</html>