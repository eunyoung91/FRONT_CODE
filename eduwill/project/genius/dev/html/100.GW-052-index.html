<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>에듀윌 그룹웨어(Genius)</title>

<!-- favicon files -->
<link rel="Bookmark Icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" />
<link rel="icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />

<!-- css files -->
<!-- layout css -->
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/plugins/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/css/essentials.css" />
<link rel="stylesheet" href="css/genius.css" />


<!-- javascript files -->
<script type="text/javascript">var plugin_path = '//img.eduwill.net/resources/kpi/live/plugins/';</script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-2.2.3.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-ui-1.12.1.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/jquery.easyui.min.js" type="text/javascript" ></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap.datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/ajaxUtil.js" type="text/javascript"></script>

<!-- validation -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.form.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.validation.min.js" type="text/javascript"></script>

<script src="//img.eduwill.net/resources/kpi/live/js/custom.js?v=5a2d148c09b00" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/common.js?v=5ad59eb6c6f40" type="text/javascript"></script>

<!-- 토스트메시지 -->
<link href="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.css" rel="stylesheet" type="text/css" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.js" type="text/javascript"></script>

<!-- 컨펌모달 -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.css">
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.js"></script>

<!-- print -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/printThis/printThis.js"></script>

<!-- editable -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap-editable.min.js"></script>

<!-- Fullcalendar -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.css" />
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.print.css" media="print" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/moment.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/lang-all.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/gcal.js" type="text/javascript"></script>

<!-- CKEditor -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/ckeditor.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/adapters/jquery.js"></script>

<script type="text/javascript">
	function pagePrint(){
		$('#pagePrint').printThis();
	}

	$(document).ready(function() {
		/** Bootstrap Tooltip **/ 
		$("[data-toggle=tooltip]").tooltip();
	})

</script>

</head>

<body class="body-sub body-genius">

<!-- wrapper -->
<div id="wrapper" class="clearfix">

	<!-- hd-wrap -->
    <section class="hd-wrap">
        <div class="hd-wrap-inner">
            <div class="logo">
                <a href="">지니어스</a>
            </div>
            <div class="gnb">
                <ul>
                    <li><a href="">전자결재</a></li>
                    <li><a href="">전사공지</a></li>
                    <li><a href="">업무요청</a></li>
                    <li><a href="">인사관리</a></li>
                    <li><a href="">지원관리</a></li>
                </ul>
            </div>
            <div class="comp-right">
                
                <div class="logout">
                    <button class="btn btn-g-link">로그아웃</button>
                </div>
                <div class="state">
                    <span onclick="$(this).next('.menu-tootip').fadeIn(100);"><i class="state-1"></i> 근무중</span>
                    <!--
                    <span><i class="state-2"></i> 자리비움</span>
                    <span><i class="state-3"></i> 로그오프</span>
                    -->
                    <div class="menu-tootip" style="display: none;" onclick="$(this).fadeOut(100);">
                        <div class="menu-tootip-inner">
                            <div class="link"><a href="#"><i class="state-1"></i> 근무중</a></div>
                            <div class="link"><a href="#"><i class="state-2"></i> 자리비움</a></div>
                            <div class="link"><a href="#"><i class="state-3"></i> 로그오프</a></div>
                        </div>
                    </div>
                </div> 
                <div class="organization">
                    <span><button class="btn btn-g-link btn-setting">관리자</button></span>
                    <span><button class="btn btn-g-link btn-person">조직도</button></span>
                </div>               
            </div>
        </div>
    </section>
    <div class="hd-wrap-expand" style="display: none;">
        <div class="hd-wrap-expand-inner">
            <div class="link">
                <a herf="">결재문서 작성</a>
                <a herf="">결재하기</a>
                <a herf="">수신함</a>
                <a herf="">매출/예산 계획 제출</a>
            </div>
            <div class="link">
                <a herf="">공지사항</a>
                <a herf="">에듀윌러 소식</a>
                <a herf="">에듀윌 스타</a>
                <a herf="">꿈의 직장</a>
            </div>
            <div class="link">
                <a herf="">마케팅</a>
                <a herf="">총무</a>
                <a herf="">IT</a>
                <a herf="">법무</a>
            </div>
            <div class="link">
                <a herf="">인사정보</a>
                <a herf="">평가</a>
                <a herf="">교육</a>
                <a herf="">자주 묻는 질문</a>
            </div>
            <div class="link">
                <a herf="">힐링큐브</a>
                <a herf="">E-스퀘어</a>
                <a herf="">차량배차</a>
                <a herf="">마음,쉼</a>
            </div>
        </div>
    </div>
    <!-- // hd-wrap -->

	<!-- aside -->
	<aside id="aside">
		<div class="aside-loaction">
			<strong>전사공지</strong>
			<button class="btn-collapse">접기</button>
		</div>
		<nav id="sideNav">
			<ul class="nav nav-list d1">
				<li class="d1 el_primary menu-open active">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-gears"></i>
						<span>공지사항</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2 active">
							<span>업적/역량</span>
							<ul class="d3"><!-- 3depth -->
								<li class="d3 active">
									<a href="javascript:;" class="d3">전체공지
										<!-- <span class="label label-number">8</span> -->
									</a>
								</li>
								<li class="d3">
									<a href="javascript:;" class="d3">평가목표 관리</a>
								</li>
							</ul><!-- // 3depth -->
						</li>
					</ul><!-- // 2depth -->
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-balance-scale"></i>
						<span>에듀윌러 소식</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-pencil-square-o"></i>
						<span>에듀윌 스타</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-table"></i>
						<span>꿈의직장</span></span>
					</a>
				</li>
			</ul>
		</nav>
	</aside>
	<div id="expand-wrap" style="display: none;">
		<button class="btn-expand">열기</button>
	</div>
	<!-- // aside -->

	<!-- middle -->
	<section id="middle">

		<script type="text/javascript">
			var ajaxUtil = new AjaxUtil();
			var callUrl = "";
			var param = "";
		
			$(document).ready(function() {
				//공백제거
				$("input").blur(function() {
					$(this).val($(this).val().replace(/\s/g, ''));
				});
				
				
					
					
						//비번 설정
						//override validate 
						$("#frmJoin").validate({	
							errorElement: "p",
							errorClass: "tooltip-text",
							highlight: function(element, errorClass, validClass) {
								$(element).parents("div.inputs").find("input.required").addClass("error").removeClass(validClass);
							},
							unhighlight: function(element, errorClass, validClass) {
								$(element).parents("div.inputs").find("input.required").addClass(validClass).removeClass("error");
							}
						});
						
						jQuery.validator.addMethod("password", function(value, element) {
							var re = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,12}/;
							return (this.optional(element) || value.match(re));
						}, "비밀번호는 영문, 숫자 조합 8~12자 내외로 작성해주세요.");
						
						$("#frmJoin .required").each(function (i) {
							$(this).rules('add', {
								required: true,
								minlength: $(this).data("minlength"),
								messages: {
									required: $(this).data("msg"),
									minlength: jQuery.validator.format("최소 {0} 글자이상 입력해주세요.")
								}
							});
						}); 
						
						//비밀번호 확인
						$("#frmJoin #confirmPassword").rules('add', {
							equalTo: "#frmJoin #password",
							messages: {
								equalTo: "비밀번호가 다릅니다."
							}
						});
					
				
				
				// 확인
				$("#btnLogin").on("click", function(e){
					//var initStep = ("" != "") ? 2 : 1;
					var initStep = $(this).data("init_step");
					
					if($("#frmJoin").valid()){
						fnc_certify(initStep);
					}
				});
				
				// 엔터 처리
				$("#frmJoin").on("keypress", "#password, #confirmPassword", function(e){
					var keyCode = 0;
					var shiftKey = false;
					keyCode = e.keyCode;
					shiftKey = e.shiftKey;
					
					if (((keyCode >= 65 && keyCode <= 90)&& !shiftKey)||((keyCode >= 97 && keyCode <= 122)&& shiftKey)){
						fnc_toastMsgForWarning("Caps Lock이 켜져 있습니다.");
					}
					
					if(e.keyCode == 13){
						//var initStep = ("" != "") ? 2 : 1; 
						var initStep = $("#btnLogin").data("init_step"); 
						
						if($("#frmJoin").valid()){
							fnc_certify(initStep);
							e.preventDefault();
						}
					}
				});
			});
			
			//비밀번호 인증
			function fnc_certify(initStep) {
				var dataArray = null;
				if(initStep == 3){
					dataArray = $("#frmUpdate").serializeArray();
				} else {
					dataArray = $("#frmJoin").serializeArray();
				}
				dataArray.push({ name : "initStep", value : initStep });
				
				$.ajax({
					type:"post"
					,url:"/login/ajaxAddCertify"
					,data: dataArray
					,dataType: "json"
					,success: function(data) {
						if(data.isCertify) {
							var redirectUrl = $("#frmJoin #currPageUrl").val();
							
							if(initStep == 3){
								$("#frmUpdate").attr("action", redirectUrl).submit();
							} else {
								$("#frmJoin").attr("action", redirectUrl).submit();
							}
						} else {
							fnc_toastMsgForWarning(data.certifyMsg);
						}
					}
					,error: function(responseJSON, status, err) {
					}
					,complete: function() {
					}
				});
			}
		</script>
		
		<div class="pass-dim pass-dim-center">
			<form id="frmJoin" name="frmJoin" method="post" novalidate="novalidate">
				<input type="hidden" id="currPageUrl" name="currPageUrl" value="/payslip/index">
				
				<div class="pass-dim-inner">
					<h4 class="bul-1 margin-top-0">개인정보 보호</h4>
					
						
													
							<p class="text-primary margin-top-0 margin-bottom-20">개인별 민감 정보가 포함되어 있으니,<br>비밀번호 관리에 유의하시기 바랍니다.<br><br>초기 비밀번호 설정하세요.</p>
							<div class="inputs margin-bottom-6">
								<input type="password" class="form-control full required" id="password" name="password" placeholder="비밀번호" autocomplete="off" data-msg="비밀번호를 입력하세요.">
							</div>
							<div class="inputs margin-bottom-6">
								<input type="password" class="form-control full required" id="confirmPassword" name="confirmPassword" placeholder="비밀번호 확인" data-msg="비밀번호를 확인해주세요.">
							</div>
							<button type="button" class="btn btn-primary full" id="btnLogin" data-init_step="1">확인</button>
						
					
				</div>
			</form>
		</div>	
		
		<style>
		.tooltip-text {
			margin: 0;
			padding: 5px;
			font-size: 13px;
			color: #333;
		}
		</style>
		
		
		<!-- 비밀번호 변경 -->
		<div id="updateAddPwd" class="modal fade modal-sm modal-w-sm modal-schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog" style="width: 460px;">
				<div class="modal-content">
		
					<!-- Modal Header -->
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
					</div>
		
					<!-- Modal Body -->
					<div class="modal-body">
						<div class="text-center padding-bottom-20">
							<h3 class="bul-1 margin-top-0 padding-bottom-0 text-left">개인정보 보호(비밀번호 변경)</h3>
						</div>
						<div class="text-center padding-bottom-10">
							<p class="text-left margin-top-0 margin-bottom-10">변경할 비밀번호를 설정하세요.</p>
						</div>
						<div class="text-left">
							<form id="frmUpdate" name="frmUpdate" method="get" novalidate="novalidate">
								<input type="hidden" id="currPageUrl" name="currPageUrl" value="/payslip/index">
							
								<div class="inputs margin-bottom-6">
									<input type="password" class="form-control full required" id="password" name="password" placeholder="현재 비밀번호" autocomplete="off" data-msg="현재 비밀번호를 입력하세요.">
								</div>
								<div class="inputs margin-bottom-6">
									<input type="password" class="form-control full required" id="newPassword" name="newPassword" placeholder="새 비밀번호" autocomplete="off" data-msg="새 비밀번호를 입력하세요.">
								</div>
								<div class="inputs margin-bottom-6">
									<input type="password" class="form-control full required" id="confirmNewPassword" name="confirmNewPassword" placeholder="새 비밀번호 확인" data-msg="새 비밀번호를 확인해주세요.">
								</div>
							</form>
						</div>
					</div>
		
					<!-- Modal Footer -->
					<div class="modal-footer clearfix text-center" style="text-align: center !important;">
						<button type="button" class="btn btn-primary" id="btnSave" data-init_step="3">확인</button>
						<button type="button" class="btn btn-teal" data-dismiss="modal">취소</button>
					</div>
				</div>
			</div>
		</div>
		<!-- // 비밀번호 변경-->
		
		
		<script type="text/javascript">
			$(document).ready(function() {
				//비번 설정
				//override validate 
				$("#frmUpdate").validate({	
					errorElement: "p",
					errorClass: "tooltip-text",
					highlight: function(element, errorClass, validClass) {
						$(element).parents("div.inputs").find("input.required").addClass("error").removeClass(validClass);
					},
					unhighlight: function(element, errorClass, validClass) {
						$(element).parents("div.inputs").find("input.required").addClass(validClass).removeClass("error");
					}
				});
				
				jQuery.validator.addMethod("password", function(value, element) {
					var re = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,12}/;
					return (this.optional(element) || value.match(re));
				}, "비밀번호는 영문, 숫자 조합 8~12자 내외로 작성해주세요.");
				
				$("#frmUpdate .required").each(function (i) {
					$(this).rules('add', {
						required: true,
						minlength: $(this).data("minlength"),
						messages: {
							required: $(this).data("msg"),
							minlength: jQuery.validator.format("최소 {0} 글자이상 입력해주세요.")
						}
					});
				}); 
				
				//비밀번호 확인
				$("#confirmNewPassword").rules('add', {
					equalTo: "#newPassword",
					messages: {
						equalTo: "비밀번호가 다릅니다."
					}
				});
				
				//저장
				$("#btnSave").on("click", function(e){
					if( $("#frmUpdate").valid() ){
						fnc_certify(3);
					}
				});
			});
		</script>
		
	</section>
	<!-- // middle -->
</div>
<!-- // wrapper -->

</body>
</html>