<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>에듀윌 그룹웨어(Genius)</title>

<!-- favicon files -->
<link rel="Bookmark Icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" />
<link rel="icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="//img.eduwill.net/Img2/Common/favicon/favicon.ico" type="image/x-icon" />

<!-- css files -->
<!-- layout css -->
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/plugins/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://img.eduwill.net/resources/kpi/dev/css/essentials.css" />
<link rel="stylesheet" href="css/genius.css" />


<!-- javascript files -->
<script type="text/javascript">var plugin_path = '//img.eduwill.net/resources/kpi/live/plugins/';</script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-2.2.3.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery/jquery-ui-1.12.1.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/jquery.easyui.min.js" type="text/javascript" ></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap.datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/ajaxUtil.js" type="text/javascript"></script>

<!-- validation -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.form.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/form.validate/jquery.validation.min.js" type="text/javascript"></script>

<script src="//img.eduwill.net/resources/kpi/live/js/custom.js?v=5a2d148c09b00" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/js/common.js?v=5ad59eb6c6f40" type="text/javascript"></script>

<!-- 토스트메시지 -->
<link href="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.css" rel="stylesheet" type="text/css" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/toastr/toastr.min.js" type="text/javascript"></script>

<!-- 컨펌모달 -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.css">
<script src="//img.eduwill.net/resources/kpi/live/plugins/jquery-confirm/jquery-confirm.min.js"></script>

<!-- print -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/printThis/printThis.js"></script>

<!-- editable -->
<script type="text/javascript" src="//img.eduwill.net/resources/kpi/live/plugins/bootstrap-editable.min.js"></script>

<!-- Fullcalendar -->
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.css" />
<link rel="stylesheet" href="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.print.css" media="print" />
<script src="//img.eduwill.net/resources/kpi/live/plugins/moment.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/lang-all.js" type="text/javascript"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/fullcalendar/gcal.js" type="text/javascript"></script>

<!-- CKEditor -->
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/ckeditor.js"></script>
<script src="//img.eduwill.net/resources/kpi/live/plugins/ckeditor/ckeditor_4.10.0_full/adapters/jquery.js"></script>

<script type="text/javascript">
	function pagePrint(){
		$('#pagePrint').printThis();
	}

	$(document).ready(function() {
		/** Bootstrap Tooltip **/ 
		$("[data-toggle=tooltip]").tooltip();
	})

</script>

</head>

<body class="body-sub body-genius">

<!-- wrapper -->
<div id="wrapper" class="clearfix">

	<!-- hd-wrap -->
    <section class="hd-wrap">
        <div class="hd-wrap-inner">
            <div class="logo">
                <a href="">지니어스</a>
            </div>
            <div class="gnb">
                <ul>
                    <li><a href="">전자결재</a></li>
                    <li><a href="">전사공지</a></li>
                    <li><a href="">업무요청</a></li>
                    <li><a href="">인사관리</a></li>
                    <li><a href="">지원관리</a></li>
                </ul>
            </div>
            <div class="comp-right">
                
                <div class="logout">
                    <button class="btn btn-g-link">로그아웃</button>
                </div>
                <div class="state">
                    <span onclick="$(this).next('.menu-tootip').fadeIn(100);"><i class="state-1"></i> 근무중</span>
                    <!--
                    <span><i class="state-2"></i> 자리비움</span>
                    <span><i class="state-3"></i> 로그오프</span>
                    -->
                    <div class="menu-tootip" style="display: none;" onclick="$(this).fadeOut(100);">
                        <div class="menu-tootip-inner">
                            <div class="link"><a href="#"><i class="state-1"></i> 근무중</a></div>
                            <div class="link"><a href="#"><i class="state-2"></i> 자리비움</a></div>
                            <div class="link"><a href="#"><i class="state-3"></i> 로그오프</a></div>
                        </div>
                    </div>
                </div> 
                <div class="organization">
                    <span><button class="btn btn-g-link btn-setting">관리자</button></span>
                    <span><button class="btn btn-g-link btn-person">조직도</button></span>
                </div>               
            </div>
        </div>
    </section>
    <div class="hd-wrap-expand" style="display: none;">
        <div class="hd-wrap-expand-inner">
            <div class="link">
                <a herf="">결재문서 작성</a>
                <a herf="">결재하기</a>
                <a herf="">수신함</a>
                <a herf="">매출/예산 계획 제출</a>
            </div>
            <div class="link">
                <a herf="">공지사항</a>
                <a herf="">에듀윌러 소식</a>
                <a herf="">에듀윌 스타</a>
                <a herf="">꿈의 직장</a>
            </div>
            <div class="link">
                <a herf="">마케팅</a>
                <a herf="">총무</a>
                <a herf="">IT</a>
                <a herf="">법무</a>
            </div>
            <div class="link">
                <a herf="">인사정보</a>
                <a herf="">평가</a>
                <a herf="">교육</a>
                <a herf="">자주 묻는 질문</a>
            </div>
            <div class="link">
                <a herf="">힐링큐브</a>
                <a herf="">E-스퀘어</a>
                <a herf="">차량배차</a>
                <a herf="">마음,쉼</a>
            </div>
        </div>
    </div>
    <!-- // hd-wrap -->

	<!-- aside -->
	<aside id="aside">
		<div class="aside-loaction">
			<strong>전사공지</strong>
			<button class="btn-collapse">접기</button>
		</div>
		<nav id="sideNav">
			<ul class="nav nav-list d1">
				<li class="d1 el_primary menu-open active">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-gears"></i>
						<span>공지사항</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2 active">
							<span>업적/역량</span>
							<ul class="d3"><!-- 3depth -->
								<li class="d3 active">
									<a href="javascript:;" class="d3">전체공지
										<!-- <span class="label label-number">8</span> -->
									</a>
								</li>
								<li class="d3">
									<a href="javascript:;" class="d3">평가목표 관리</a>
								</li>
							</ul><!-- // 3depth -->
						</li>
					</ul><!-- // 2depth -->
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-balance-scale"></i>
						<span>에듀윌러 소식</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1 el_primary">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-pencil-square-o"></i>
						<span>에듀윌 스타</span>
					</a>
					<ul class="d2"><!-- 2depth -->
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
						<li class="d2">
							<a href="javascript:;" class="d2">depth2</a>
						</li>
					</ul>
				</li>
				<li class="d1">
					<a href="javascript:;" class="d1">
						<i class="main-icon fa fa-table"></i>
						<span>꿈의직장</span></span>
					</a>
				</li>
			</ul>
		</nav>
	</aside>
	<div id="expand-wrap" style="display: none;">
		<button class="btn-expand">열기</button>
	</div>
	<!-- // aside -->

	<!-- middle -->
	<section id="middle">
		
		<div id="content" class="padding-20">
			<div class="container section-search-form section-search-form-bg">
				<div class="middle-location">
					<a href="/" class="home">홈</a>
					<a href="#">인사관리</a>
					<a href="#">근태/휴가</a>
					<a href="#">근무 스케줄관리</a>
				</div>
				<div class="wrap">
					<form id="frm1" name="frm1" action="/mngschedule/index" method="post">
						<input type="hidden" id="calendarStart" name="calendarStart" value="20210228">
						<input type="hidden" id="calendarEnd" name="calendarEnd" value="20210410">
						<input type="hidden" id="dept_idx" name="dept_idx" value="239">	
						<input type="hidden" id="dept_idxs" name="dept_idxs" value="239">	
						<input type="hidden" id="isschedule" name="isschedule" value="N">	
						
						<div class="row">
							<div class="col-xs-7">
								<select class="form-control dept" id="dept_idx1" name="dept_idx1" title="본부">
									
										<option value="5" data-rfval1="Y" data-rfval2="N" selected="">IT플랫폼본부</option>
									
								</select>
								<select class="form-control dept" id="dept_idx2" name="dept_idx2" title="실/팀">
									
									
										<option value="239" data-rfval1="N" data-rfval2="N" selected="">플랫폼개발2팀</option>
									
								</select>
								<select class="form-control dept" id="dept_idx3" name="dept_idx3" title="팀/파트" style="display: none;">
									
									
								</select>
								<select class="form-control dept" id="dept_idx4" name="dept_idx4" title="파트" style="display: none;">
									
									
								</select>
								<input type="text" id="emp_name" name="emp_name" class="form-control" placeholder="이름" value="김현경" autocomplete="off" disabled="">
								<button type="button" class="btn btn-teal" id="btnSearch">조회</button>
							</div>
							<div class="col-xs-5 text-right btn-zone">
								
								
								
							</div>
						</div>
					</form>
				</div>
			</div>
			
			<div class="alert alert-warning margin-bottom-10 margin-top-9" id="divInfo" style="cursor: pointer;">
				<span class="weight-600">※ 근무 스케줄 등록 가이드 보기 ▼</span>
				<div class="margin-top-3" id="divInfoContent" style="display: none;">
					※ 근무 스케줄  등록안내<br>
					 - 근무 스케줄은 각 조직의 정해진 부서시간 및  '드림데이'  정보를 관리합니다.<br>
					 - 근무 스케줄은 당일 제외 미래일만 등록 및 수정이 가능하며, 과거 일은 수정할 수 없습니다.<br>
					<br>
					※ 드림데이 등록 안내<br>
					 - 1주일 기준 : 일요일부터 6일 후의 토요일까지를 의미합니다.<br>
					 - '드림데이'는  한 주 기준으로 1회까지만 등록 가능합니다.<br>
					 - 한 주에 인사팀에서 지정한 공휴일이 있는 경우 '드림데이' 등록이 불가합니다.<br>
					 - 한 주에 연차, 경조, 기타휴가, 휴일대체(대체휴무)가 2일 이상(반차 2개 사용한 2일 포함) 있는 경우 '드림데이' 등록 불가하며, 등록 후 휴가승인이 되면 '드림데이' 는 자동삭제 됩니다.<br>
					 - 한 주에 장기근속휴가, 본인/배우자 출산휴가, 유사산휴가, 휴직일이 1일 이상 있는 경우 '드림데이' 등록 불가하며, 등록 후 휴가승인이 되면 '드림데이' 는 자동삭제 됩니다.<br>
				</div>
			</div>
		
			<div class="container section-survey nopadding margin-top-9">
				<div class="panel-body" id="divTabBody">
		
		
		
		
		
		
		
					<script type="text/javascript">
						
						$(document).ready(function () {
							//initialize the external events
							$('#external-events div.external-event').each(function () {
								var eventObject = {
									title: $.trim($(this).text())
								};
								$(this).data('eventObject', eventObject);
								$(this).draggable({
									zIndex: 999,
									revert: true,
									revertDuration: 0
								});
							});
							
							//스케줄 등록 
							$("#btnSchdulGroup").on("click", function () {
								var selected_days = "";
								//선택 날짜 get
								$(".fc-body .fc-day-grid").find(".fc-row").each(function () {
									$(this).find("td").each(function name() {
										if($(this).hasClass("active")){
											selected_days += $(this).data("date");
										}
									});
								});
								
								if(selected_days != ""){
									if(isschedule == "Y"){
										$('#scheduleRegister').modal('show');
									} else {
										$('#scheduleRegister2').modal('show');
									}
									
								} else {
									fnc_toastMsgForWarning("스케줄 등록할 날짜를 선택해주세요.");
									return false;
								}
							});
							
							//initialize the calendar
							$('#divTabBody #calendar').fullCalendar({
								header: {
									left: '',
									center: 'prev, title, next',
									right: ''
								},
								//defaultDate : '',
								lang: "ko",
								eventLimit: true,
								editable: false,
								droppable: true,
								eventDurationEditable : false,
								loading : function(bool) {
								},
								drop: function (date, allDay) { 
								},
								eventDragStart: function(event) {
								},
								eventDragStop: function(event) {
								},
								eventDrop: function(event, delta, revertFunc, jsEvent, ui, view) {
									return false;
								},
								eventResize: function (event, delta, revertFunc, jsEvent, ui, view ) {
									//이벤트기간을 늘리거나 줄였을때 발생 (eventDurationEditable = true 일경우)
									return false;
								},
								eventOverlap: function(stillEvent, movingEvent) {
									//켈린더내에서 이벤트 이동시 오버랩되는 이벤트가 있는경우 발생
									return false;
								},
								eventClick: function(event) {
									var schedule_cd = event.title.split("|")[5];
									// 공휴일이 아닌 경우
									if(schedule_cd != "SC000"){
										//수정 불가 일자 여부 확인 
										if (isPastDay(event.start) == false) {
											//return false;
											fnc_toastMsgForWarning("지난날의 스케줄은 수정 불가합니다.");
											return false;
										}
									}
								},
								views: {
									month: {
										titleFormat: "YYYY. MM",
										dayOfMonthFormat: 'ddd DD/MM',
									},
									
									agenda: {
										eventLimit: 5 //더보기 설정
									}
								}, 
								dayClick : function (date, jsEvent, view) {
									//지난일자 선택 불가
									if (isPastDay(date.format())) {
										// day 선택 class
										if($(this).hasClass("active")){
											$(this).removeClass("active");
										} else {
											$(this).addClass("active");
										}
										
										// 스케줄등록 버튼 class
										var selectedDayCnt = 0;
										$(".fc-day-grid .fc-row").each(function () {
											$(this).find(".fc-day").each(function () {
												if( $(this).hasClass("active") ) {
													selectedDayCnt++;
												}
											})
										});
										
										if(selectedDayCnt > 0){
											$("#btnSchdulGroup").addClass("on");
										} else {
											$("#btnSchdulGroup").removeClass("on");
										}
										
									} else {
										fnc_toastMsgForWarning("지난날의 스케줄은 선택이 불가합니다.");
										return false;
									}
								},
								eventAfterRender : function(event, element) {
										var title = $(element).find('.fc-content').text();
										var arr = title.split("|");
										
										var emp_name = arr[1];			// 이름
										var ldap_id = arr[2];			// ad 아디이
										var is_yn = arr[3];				// 재직자 1년 미만 or 공휴일YN
										var schedule_title = arr[4];	// 스케줄 타이틀
										var schedule_cd = arr[5];		// 스케줄 코드
										var schedule_day = moment(event.start).format("YYYYMMDD");		// 스케줄 일정
										var className = fnc_getClassName(schedule_cd);					// 클래스이름
										var seq = arr[6];
					
										var appendHtml = "";
										if(schedule_cd == "SC000") {
											// 공휴일
											if(roleGroup != "USER" && roleGroup != "ADMIN" && isPastDay(event.start)){
												var event_title = schedule_title+"|"+is_yn
												var holiday_mod_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_openModalForHoliday('"+schedule_day+"','"+event_title+"','M');\"" : "";		// 공휴일 수정 함수
												var holiday_remove_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_removeHoliday('"+schedule_day+"');\"" : "";			// 공휴일 삭제 함수
												
												appendHtml += "<span class=\"name\" "+holiday_mod_fn+">" + schedule_title + "</span>";
												appendHtml += "<a class=\"close\" "+holiday_remove_fn+">x</a>";
											} else {
												appendHtml += "<span class='" + className +"'>" + schedule_title + "</span>";
											}
											
										} else {
											// content custom
											var schedule_mod_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_modEmpSchedule('"+schedule_day+"','"+schedule_cd+"','"+ldap_id+"','"+emp_name+"', '"+seq+"');\"" : "";		// 스케줄 수정 함수
											var schedule_remove_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_removeEmpSchedule('"+schedule_day+"','"+ldap_id+"', '"+seq+"');\"" : "";	// 스케줄 삭제 함수
											
											appendHtml += "";
											appendHtml += "<span class=\"name\" " + schedule_mod_fn + ">" + emp_name + "</span>";
											//appendHtml += (is_yn == "Y") ? "<span class='em'>*</span>" : "";
											appendHtml += "<span class=\"" + className + "\" " + schedule_mod_fn + ">" + schedule_title + "</span>";
											appendHtml += "<a class=\"close\" " + schedule_remove_fn + ">x</a>";
										}
										
										$(element).find('.fc-title').remove();
										$(element).find('.fc-content').append(appendHtml);
										$(element).find('.fc-content').addClass(className);
										
										//수정 가능 일자만 a > div 로 변경
										if (isPastDay(event.start)) {
											var b = $(element).find('.fc-content').clone();
											$(element).parent().append("<div class='fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable fc-div'></div>");
											$(element).parent().find(".fc-div").append(b);
											$(element).remove();
										}
										
								},
								eventLimitClick : function (cellInfo, jsEvent ) {
									// 기존 popover 제거
									$(".fc-popover").remove();
									
									var popover_day = moment(cellInfo.date).format("YYYY-MM-DD");
									var title_day = moment(cellInfo.date).format("YYYY년 MM월 DD일");
									
									var appendHtml = "";
									appendHtml += "";
									appendHtml += "<div class=\"fc-popover fc-more-popover\">";
									appendHtml += "		<div class=\"fc-header fc-widget-header\">";
									appendHtml += "			<span class=\"fc-close fc-icon fc-icon-x\" onclick=\"javascript:$(this).closest('.fc-popover').remove();\"></span>";
									appendHtml += "			<span class=\"fc-title\">" + title_day + "</span>";
									appendHtml += "			<div class=\"fc-clear\"></div>";
									appendHtml += "		</div>"	;
									appendHtml += "		<div class=\"fc-body fc-widget-content\">";
									appendHtml += "			<div class=\"fc-event-container\">";
									
									var list = cellInfo.segs;
									for (var i = 0; i < list.length; i++) {
										var title = list[i].event.title;
										var arr = title.split("|");
										
										var emp_name = arr[1];			// 이름
										var ldap_id = arr[2];			// ad 아디이
										var is_yn = arr[3];				// 재직자 1년 미만 or 공휴일YN
										var schedule_title = arr[4];	// 스케줄 타이틀
										var schedule_cd = arr[5];		// 스케줄 코드
										var schedule_day = moment(list[i].event.start).format("YYYYMMDD");		// 스케줄 일정
										var className = fnc_getClassName(schedule_cd);							//클래스이름
										var seq = arr[6];
										
										// content custom
										var schedule_mod_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_modEmpSchedule('"+schedule_day+"','"+schedule_cd+"','"+ldap_id+"','"+emp_name+"', '"+seq+"');$('.fc-popover').remove();\"" : "";		// 스케줄 수정 함수
										var schedule_remove_fn = isPastDay(event.start) ? "onclick=\"javascript:fnc_removeEmpSchedule('"+schedule_day+"','"+ldap_id+"', '"+seq+"');$('.fc-popover').remove();\"" : "";	// 스케줄 삭제 함수
										
										appendHtml += "<div class=\"fc-day-grid-event fc-h-event fc-event fc-start fc-end fc-draggable\">";
										appendHtml += "		<div class='fc-content " + className + "'>";
										
										// 공휴일 예외처리 하기!!
										if(schedule_cd == "SC000") {
											// 공휴일
											appendHtml += "<span class='" + className +"'>" + schedule_title + "</span>";
										} else {
											appendHtml += "			<span class=\"name\" " + schedule_mod_fn + ">" + emp_name + "</span>";
											//appendHtml += (is_yn == "Y") ? "<span class='em'>*</span>" : "";
											appendHtml += "			<span class='" + className + "'>" + schedule_title + "</span>";
											appendHtml += "			<a class=\"close\" " + schedule_remove_fn + ">x</a>";
										}
										appendHtml += "		</div>";
										appendHtml += "</div>";
									}
									
									appendHtml += "			</div>";
									appendHtml += "		</div>";
									
									//마지막 row 에 추가
									$(".fc-day-grid").find(".fc-row").last().after(appendHtml);
									
									//popover 위치
									var top = $(".fc-day-number[data-date="+popover_day+"]").offset().top;
									var left = $(".fc-day-number[data-date="+popover_day+"]").offset().left;
									var popoverBottom = $(".fc-popover").position().top + $(".fc-popover").outerHeight(true);
									var divBottom = $("#divTabBody").position().top + $("#divTabBody").outerHeight(true);
									top = (popoverBottom > divBottom ) ? top - (popoverBottom - divBottom + 10) : top;		// #divTabBody bottom 보다 위
									top = (top < $("#divTabBody").offset().top ) ? $("#divTabBody").offset().top + top : top; // #divTabBody top 보다 아래
									$(".fc-popover").offset({ top : top, left : left });
								}
								
							});
							
							// 재직자 스케줄 조회
							setTimeout(function(){
								fnc_getSchedule("", "");
							},200);
							
							//달력 변경이벤트 (이전/다음 공통)
							$('.fc-button').click(function() {
								//선택된 재직자가 있는경우 스케줄 조회
								var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
								var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
								
								fnc_getSchedule(startDate, endDate);
							});
						});
						
						//과거및 오늘 스케줄인경우 등록/수정을 막기 위해 체크
						function isPastDay(compareDay) {
							var currentDay = new Date();
							var yyyy = currentDay.getFullYear();			
							var mm = String(currentDay.getMonth() + 1);
							var dd = String(currentDay.getDate());
							var yyyymmdd = String(yyyy) +'-'+ String(mm[1]?mm:'0'+mm[0])+'-'+String(dd[1]?dd:'0'+dd[0]);
							
							compareDay = new Date(compareDay);
							yyyy = compareDay.getFullYear();			
							mm = String(compareDay.getMonth() + 1);
							dd = String(compareDay.getDate());
							var yyyymmdd2 = String(yyyy) +'-'+ String(mm[1]?mm:'0'+mm[0])+'-'+String(dd[1]?dd:'0'+dd[0]);
							
							if (yyyymmdd2 > yyyymmdd) {
								return true;
							}
							return false;
						}
						
						//재직자 스케줄 조회
						function fnc_getSchedule(startDate, endDate) {
							//조회기간 설정
							if(startDate == "" || endDate == ""){
								startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
								endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
							}
							$("input[name=calendarStart]").val(startDate);
							$("input[name=calendarEnd]").val(endDate);
							
							var dataArray = $("form[id=frm1]").serializeArray();
							$.ajax({
								type:"post"
								,url:"/mngschedule/ajaxSelectScheduleList"
								,data: dataArray
								,dataType:"json"
								,success: function(data) {
									var list = data;
									
									var eventSoruce = new Array();
									for(var i=0; i < list.length; i++) {
										var eventItem = new Object();
										eventItem.title = list[i].title;
										eventItem.start = moment(list[i].start, "YYYY-MM-DD");
										eventItem.allDay = true;
										eventSoruce[i] = eventItem;
									}
									//모든이벤트 지우기
									$("#calendar").fullCalendar("removeEvents");
									//새로운 이벤트 등록
									$("#calendar").fullCalendar("addEventSource", eventSoruce);
									
								}
								,error: function(data, status, err) {
									alert("err: " + err);
								}
							});
						}
						
						//재직자 스케줄 삭제
						function fnc_removeEmpSchedule(schedule_day, ldap_id, seq) {
							$.ajax({
								type : "post"
								,async : false
								,url : "/mngschedule/ajaxRemoveSchedule"
								,data : { schedule_day : schedule_day, ldap_id : ldap_id, seq : seq }
								,dataType : "json"
								,success : function(data) {
									var result = data.result;
									
									if(result == 1){
										fnc_toastMsgForResult("삭제 되었습니다.");
										
										//캘린더 리프레시
										var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
										var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
										fnc_getSchedule(startDate, endDate);
									} else {
										fnc_toastMsgForWarning("실패 하였습니다.");
										return false;
									}
								}
								,error : function(data, status, err) {
								
								} 
							});
						}
						
						// 스케줄 변경
						function fnc_modEmpSchedule(schedule_day, schedule_cd, ldap_id, emp_name, seq) {
							//모달세팅
							$("#frmScheduleMod #schedule_day").val(schedule_day);
							$("#frmScheduleMod #ldap_id").val(ldap_id);
							$("#frmScheduleMod #seq").val(seq);
							
							var format_day = moment(schedule_day, "YYYY-MM-DD").toDate()
							$("#scheduleModify #myModalLabel").html("<strong>"+emp_name+"</strong>"+"님의 스케줄 변경("+moment(format_day).format("YYYY-MM-DD")+")");
							
							var param = { schedule_day : schedule_day, ldap_id : ldap_id, schedule_cd : schedule_cd, seq : seq }
							$.post("/mngschedule/ajaxScheduleInfoForEmp", param, function(data) {
								//근무시간 조회
								ajaxUtil.commonAjaxPost("/mngschedule/ajaxScheduleCodeList", null, $("#scheduleModify #schedule_cd"), schedule_cd, "선택");
								
								//외근,교육일 경우 
								if(data.SCHEDULE_CD == "SC006" || data.SCHEDULE_CD == "SC007"){
									var dutytime_start = data.DUTYTIME_START;
									var dutytime_end = data.DUTYTIME_END;
									$("#frmScheduleMod #fromdt").val(dutytime_start);
									$("#frmScheduleMod #todt").val(dutytime_end);
									$("#scheduleModify #divDutytime").show();
								} else {
									$("#frmScheduleMod #fromdt").val("");
									$("#frmScheduleMod #todt").val("");
									$("#scheduleModify #divDutytime").hide();
								}
							});
							
							//모달 show
							$('#scheduleModify').modal('show');
						}
						
						//캘린더 이벤트 세팅
						function fnc_getClassName(schedule_cd) {
							var className = "";
							switch (schedule_cd) {
								case "SC000" : className = "holiday"; break;	//공휴일
								case "SC002" : className = "day-off"; break;	//휴무
								case "SC003" : className = "day-off-annual"; break;		//휴무(연)
								case "SC004" : className = "day-off-attend"; break;		//휴무(개)
								case "SC005" : className = "day-off-academy"; break;	//휴무(학)
								default : className = "schedule"; break;
							}
							return className;
						}
					</script>
					
					<div class="row">
						<div class="col-xs-12">
							<button type="button" class="btn btn-primary" id="btnSchdulGroup" data-target="#scheduleRegister">스케줄 등록</button>
						</div>
					</div>
					
					<div id="calendar" class="fc fc-ltr fc-unthemed"><div class="fc-toolbar"><div class="fc-left"></div><div class="fc-right"></div><div class="fc-center"><button type="button" class="fc-prev-button fc-button fc-state-default fc-corner-left fc-corner-right"><span class="fc-icon fc-icon-left-single-arrow"></span></button><h2>2021. 03</h2><button type="button" class="fc-next-button fc-button fc-state-default fc-corner-left fc-corner-right"><span class="fc-icon fc-icon-right-single-arrow"></span></button></div><div class="fc-clear"></div></div><div class="fc-view-container" style=""><div class="fc-view fc-month-view fc-basic-view" style=""><table><thead class="fc-head"><tr><td class="fc-widget-header"><div class="fc-row fc-widget-header"><table><thead><tr><th class="fc-day-header fc-widget-header fc-sun">일</th><th class="fc-day-header fc-widget-header fc-mon">월</th><th class="fc-day-header fc-widget-header fc-tue">화</th><th class="fc-day-header fc-widget-header fc-wed">수</th><th class="fc-day-header fc-widget-header fc-thu">목</th><th class="fc-day-header fc-widget-header fc-fri">금</th><th class="fc-day-header fc-widget-header fc-sat">토</th></tr></thead></table></div></td></tr></thead><tbody class="fc-body"><tr><td class="fc-widget-content"><div class="fc-day-grid-container" style=""><div class="fc-day-grid"><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-other-month fc-past" data-date="2021-02-28"></td><td class="fc-day fc-widget-content fc-mon fc-past" data-date="2021-03-01"></td><td class="fc-day fc-widget-content fc-tue fc-past" data-date="2021-03-02"></td><td class="fc-day fc-widget-content fc-wed fc-past" data-date="2021-03-03"></td><td class="fc-day fc-widget-content fc-thu fc-past" data-date="2021-03-04"></td><td class="fc-day fc-widget-content fc-fri fc-past" data-date="2021-03-05"></td><td class="fc-day fc-widget-content fc-sat fc-past" data-date="2021-03-06"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-other-month fc-past" data-date="2021-02-28">28</td><td class="fc-day-number fc-mon fc-past" data-date="2021-03-01">1</td><td class="fc-day-number fc-tue fc-past" data-date="2021-03-02">2</td><td class="fc-day-number fc-wed fc-past" data-date="2021-03-03">3</td><td class="fc-day-number fc-thu fc-past" data-date="2021-03-04">4</td><td class="fc-day-number fc-fri fc-past" data-date="2021-03-05">5</td><td class="fc-day-number fc-sat fc-past" data-date="2021-03-06">6</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-past" data-date="2021-03-07"></td><td class="fc-day fc-widget-content fc-mon fc-today fc-state-highlight" data-date="2021-03-08"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2021-03-09"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2021-03-10"></td><td class="fc-day fc-widget-content fc-thu fc-future" data-date="2021-03-11"></td><td class="fc-day fc-widget-content fc-fri fc-future" data-date="2021-03-12"></td><td class="fc-day fc-widget-content fc-sat fc-future" data-date="2021-03-13"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-past" data-date="2021-03-07">7</td><td class="fc-day-number fc-mon fc-today fc-state-highlight" data-date="2021-03-08">8</td><td class="fc-day-number fc-tue fc-future" data-date="2021-03-09">9</td><td class="fc-day-number fc-wed fc-future" data-date="2021-03-10">10</td><td class="fc-day-number fc-thu fc-future" data-date="2021-03-11">11</td><td class="fc-day-number fc-fri fc-future" data-date="2021-03-12">12</td><td class="fc-day-number fc-sat fc-future" data-date="2021-03-13">13</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-future" data-date="2021-03-14"></td><td class="fc-day fc-widget-content fc-mon fc-future" data-date="2021-03-15"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2021-03-16"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2021-03-17"></td><td class="fc-day fc-widget-content fc-thu fc-future" data-date="2021-03-18"></td><td class="fc-day fc-widget-content fc-fri fc-future" data-date="2021-03-19"></td><td class="fc-day fc-widget-content fc-sat fc-future" data-date="2021-03-20"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-future" data-date="2021-03-14">14</td><td class="fc-day-number fc-mon fc-future" data-date="2021-03-15">15</td><td class="fc-day-number fc-tue fc-future" data-date="2021-03-16">16</td><td class="fc-day-number fc-wed fc-future" data-date="2021-03-17">17</td><td class="fc-day-number fc-thu fc-future" data-date="2021-03-18">18</td><td class="fc-day-number fc-fri fc-future" data-date="2021-03-19">19</td><td class="fc-day-number fc-sat fc-future" data-date="2021-03-20">20</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-future" data-date="2021-03-21"></td><td class="fc-day fc-widget-content fc-mon fc-future" data-date="2021-03-22"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2021-03-23"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2021-03-24"></td><td class="fc-day fc-widget-content fc-thu fc-future" data-date="2021-03-25"></td><td class="fc-day fc-widget-content fc-fri fc-future" data-date="2021-03-26"></td><td class="fc-day fc-widget-content fc-sat fc-future" data-date="2021-03-27"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-future" data-date="2021-03-21">21</td><td class="fc-day-number fc-mon fc-future" data-date="2021-03-22">22</td><td class="fc-day-number fc-tue fc-future" data-date="2021-03-23">23</td><td class="fc-day-number fc-wed fc-future" data-date="2021-03-24">24</td><td class="fc-day-number fc-thu fc-future" data-date="2021-03-25">25</td><td class="fc-day-number fc-fri fc-future" data-date="2021-03-26">26</td><td class="fc-day-number fc-sat fc-future" data-date="2021-03-27">27</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-future" data-date="2021-03-28"></td><td class="fc-day fc-widget-content fc-mon fc-future" data-date="2021-03-29"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2021-03-30"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2021-03-31"></td><td class="fc-day fc-widget-content fc-thu fc-other-month fc-future" data-date="2021-04-01"></td><td class="fc-day fc-widget-content fc-fri fc-other-month fc-future" data-date="2021-04-02"></td><td class="fc-day fc-widget-content fc-sat fc-other-month fc-future" data-date="2021-04-03"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-future" data-date="2021-03-28">28</td><td class="fc-day-number fc-mon fc-future" data-date="2021-03-29">29</td><td class="fc-day-number fc-tue fc-future" data-date="2021-03-30">30</td><td class="fc-day-number fc-wed fc-future" data-date="2021-03-31">31</td><td class="fc-day-number fc-thu fc-other-month fc-future" data-date="2021-04-01">1</td><td class="fc-day-number fc-fri fc-other-month fc-future" data-date="2021-04-02">2</td><td class="fc-day-number fc-sat fc-other-month fc-future" data-date="2021-04-03">3</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content fc-rigid" style="height: 193px;"><div class="fc-bg"><table><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-other-month fc-future" data-date="2021-04-04"></td><td class="fc-day fc-widget-content fc-mon fc-other-month fc-future" data-date="2021-04-05"></td><td class="fc-day fc-widget-content fc-tue fc-other-month fc-future" data-date="2021-04-06"></td><td class="fc-day fc-widget-content fc-wed fc-other-month fc-future" data-date="2021-04-07"></td><td class="fc-day fc-widget-content fc-thu fc-other-month fc-future" data-date="2021-04-08"></td><td class="fc-day fc-widget-content fc-fri fc-other-month fc-future" data-date="2021-04-09"></td><td class="fc-day fc-widget-content fc-sat fc-other-month fc-future" data-date="2021-04-10"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-number fc-sun fc-other-month fc-future" data-date="2021-04-04">4</td><td class="fc-day-number fc-mon fc-other-month fc-future" data-date="2021-04-05">5</td><td class="fc-day-number fc-tue fc-other-month fc-future" data-date="2021-04-06">6</td><td class="fc-day-number fc-wed fc-other-month fc-future" data-date="2021-04-07">7</td><td class="fc-day-number fc-thu fc-other-month fc-future" data-date="2021-04-08">8</td><td class="fc-day-number fc-fri fc-other-month fc-future" data-date="2021-04-09">9</td><td class="fc-day-number fc-sat fc-other-month fc-future" data-date="2021-04-10">10</td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div></div></div></td></tr></tbody></table></div></div></div></div>	
				</div>
			</div>
			
			<!-- Modal : scheduleRegister 스케줄 등록 -->
			<div id="scheduleRegister" class="modal fade modal-sm modal-schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								스케줄 등록
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmSchedule" name="frmSchedule" action="" method="post" novalidate="novalidate">
								<input type="hidden" id="schedule_days" name="schedule_days" value="">
								<input type="hidden" id="dutytime_start" name="dutytime_start" value="">
								<input type="hidden" id="dutytime_end" name="dutytime_end" value="">
								<input type="hidden" id="dept_idx" name="dept_idx" value="">
								
								<h4><i class="i-title i-1"></i>대상자</h4>
								<div class="form-inline">
									<select class="form-control dept" id="dept_idx1" name="dept_idx1" title="본부" style="display: none;"></select>
									<select class="form-control dept" id="dept_idx2" name="dept_idx2" title="실/팀" style="display: none;"></select>
									<select class="form-control dept" id="dept_idx3" name="dept_idx3" title="팀/파트" style="display: none;"></select>
									<select class="form-control dept" id="dept_idx4" name="dept_idx4" title="파트" style="display: none;"></select>
									
									<select class="form-control" id="target_type" name="target_type">
										<option value="">대상구분</option>
										<option value="group">그룹</option>
										<option value="emp">개인</option>
									</select>
									<select class="form-control" id="target_id" name="target_id">
										<option value="">대상자</option>
									</select>
								</div>
								<div class="list-box">
									<ul class="clearfix type1" id="ulTarget">
									</ul>
								</div>
								<h4><i class="i-title i-2"></i>근무시간</h4>
								<div class="form-inline row">
									<div class="col-xs-6">
										<select class="form-control width-200 required" id="schedule_cd" name="schedule_cd" data-msg="근무시간을 선택해주세요.">
											<option value="">선택</option>
										</select>
									</div>
									<div class="col-xs-6" id="divDutytime" style="display: none;">
										<input type="text" class="form-control width-100" name="fromdt" id="fromdt" value="" autocomplete="off" placeholder="예) 09:30">
										<!-- <div class="pull-left margin-top-10 margin-left-10 margin-right-10">~</div -->
										<input type="text" class="form-control width-100" name="todt" id="todt" value="" autocomplete="off" placeholder="예) 18:30">
									</div>
								</div>
								<div class="info-dayoff">
									<ul class="clearfix">
										<li class="dayoff-1"><em>드림데이</em><span>주4일제 시행으로 진행되는 휴무</span></li>
										<li class="dayoff-4"><em>휴무(학)</em><span>기존 학원의 휴무 (1주 2일/ 본사의 경우 토,일에 해당)</span></li>
									</ul>
									<div>
										- 오늘 이후의 스케줄을 등록/수정 가능합니다.<br>
										- 드림데이는 1주일(일~토)에 1회만 등록 가능하며, 주중 2일(반차 2일 포함) 이상 휴가 사용시에는 설정이 불가능합니다.<br> 
										- 외근/외부교육시 출퇴근 기록과 연동되므로, 실제 참석 시간이 아닌 교통시간까지 더하여 입력합니다.<br>
									</div>
								</div>
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary" id="btnScheduleSave">저장</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal : scheduleRegister 스케줄 등록 -->
			
			<!-- Modal : scheduleGroup 그룹관리 -->
			<div id="scheduleGroup" class="modal fade modal-w-md modal-schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog" style="width: 1050px;">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								그룹관리
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<h4><i class="i-title i-3"></i>그룹등록</h4>
							<form id="frmGroup" name="frmGroup" action="" method="post" novalidate="novalidate">
								<input type="hidden" id="group_idx" name="group_idx" value="">
								<input type="hidden" id="dept_idx" name="dept_idx" value="">
								
								<table class="tb-style1">
									<colgroup>
										<col width="126">
										<col width="*">
									</colgroup>
									<tbody>
										<tr>
											<th>그룹제목</th>
											<td>
												<input type="text" class="form-control full required" id="title" name="title" placeholder="띄어쓰기 포함 15자까지 입력가능" maxlength="15" autocomplete="off" data-msg="그룹 제목을 입력하세요.">
											</td>
										</tr>
										<tr>
											<th>대상선택</th>
											<td>
												<div class="form-inline">
													<select class="form-control margin-0 dept" id="dept_idx1" name="dept_idx1" title="본부"></select>
													<select class="form-control margin-0 dept" id="dept_idx2" name="dept_idx2" title="실/팀"></select>
													<select class="form-control margin-0 dept" id="dept_idx3" name="dept_idx3" title="팀/파트"></select>
													<select class="form-control margin-0 dept" id="dept_idx4" name="dept_idx4" title="파트"></select>
													<select class="form-control margin-0" id="target_id" name="target_id">
														<option value="">대상자</option>
													</select>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							
								<div class="list-box">
									<ul class="clearfix type1" id="ulGroupRegister">
										<!-- 대상자 추가 영역 -->
									</ul>
								</div>
								<div class="area-btn">
									<button type="button" class="btn btn-dark" id="btnGroupSave">저장</button>
								</div>
							</form>
							
							<h4><i class="i-title i-4"></i>그룹관리</h4>
							<div class="list-box" id="divGroupList">
								<!-- from blankScheduleGroupListForMnggroup -->
							</div>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal -->
			
			<!-- 스케줄 변경 : Modal -->
			<div id="scheduleModify" class="modal fade modal-sm modal-schedule in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								<strong>홍길동</strong>님의 스케줄 변경 (2019-05-24)
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmScheduleMod" name="frmScheduleMod" action="" method="post" novalidate="novalidate">
								<input type="hidden" id="ldap_id" name="ldap_id" value="">
								<input type="hidden" id="schedule_day" name="schedule_day" value="">
								<input type="hidden" id="dutytime_start" name="dutytime_start" value="">
								<input type="hidden" id="dutytime_end" name="dutytime_end" value="">
								<input type="hidden" id="seq" name="seq" value="">
								
								<h4><i class="i-title i-2"></i>근무시간</h4>
								<div class="form-inline row">
									<div class="col-xs-6">
										<select class="form-control width-200 required" id="schedule_cd" name="schedule_cd">
											<option value="">선택</option>
										</select>
									</div>
									<div class="col-xs-6" id="divDutytime" style="display: none;">
										<input type="text" class="form-control width-100" name="fromdt" id="fromdt" value="" autocomplete="off" placeholder="예) 09:30">
										<!-- <div class="pull-left margin-top-10 margin-left-10 margin-right-10">~</div -->
										<input type="text" class="form-control width-100" name="todt" id="todt" value="" autocomplete="off" placeholder="예) 18:30">
									</div>
								</div>
								<div class="info-dayoff">
									<ul class="clearfix">
										<li class="dayoff-1"><em>드림데이</em><span>주4일제 시행으로 진행되는 휴무</span></li>
										<li class="dayoff-4"><em>휴무(학)</em><span>기존 학원의 휴무 (1주 2일/ 본사의 경우 토,일에 해당)</span></li>
									</ul>
								</div>
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary" id="btnScheduleMod">저장</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal -->
			
			<!-- Modal : 스케줄 엑셀 업로드 -->
			<div id="scheduleUpload" class="modal fade modal-sm modal-schedule  in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								스케줄 엑셀 업로드
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmForImportToExcel" name="frmForImportToExcel" method="post" action="">
								<input type="hidden" id="dept_idx" name="dept_idx" value="">
								<input type="hidden" id="dept_idxs" name="dept_idxs" value="">
								
								<div class="file-upload-wrap">
									<div class="fancy-file-upload">
										<input type="file" class="form-control" id="file1" name="file1" accept="application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" onchange="fnc_checkUploadFile();">
										<input type="text" class="form-control text" id="filename" placeholder="no file selected" readonly="">
										<span class="button btn-danger">파일찾기</span>
									</div>
									<small class="block">
										* 지정된 샘플 엑셀 파일만 첨부 가능합니다. (.xls, .xlsx)<br>
										<span class="text-danger">
											* 파일명에 특수기호를 사용하지 말아주세요.<br>
											* 외근/외부교육은 엑셀파일로 등록할 수 없습니다.<br>
											* 기존 스케줄은 삭제 후 등록됩니다.
										</span>
									</small>
								</div>
								<div class="text-left">
									<select class="form-control dept" id="dept_idx1" name="dept_idx1" title="본부"></select>
									<select class="form-control dept" id="dept_idx2" name="dept_idx2" title="실/팀"></select>
									<select class="form-control dept" id="dept_idx3" name="dept_idx3" title="팀/파트"></select>
									<select class="form-control dept" id="dept_idx4" name="dept_idx4" title="파트"></select>
									
									<button type="button" class="btn btn-dark" id="btnSampleDownload">샘플양식 다운로드</button>
								</div>
								<input type="hidden" name="dummy" value="go">
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary" id="btnImportToExcel">저장</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal-->
			
			<div id="scheduleBaseSet" class="modal fade modal-sm modal-w-sm modal-schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								기본 업무 시간
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmScheduleBasic" name="frmScheduleBasic" method="post" action="" novalidate="novalidate">
								<input type="hidden" id="dept_idx" name="dept_idx" value="">
								
								<div class="row">
									<div class="col-xs-6">
										<div class="padding-bottom-10 text-primary bold">업무시작시간</div>
										<div><input type="text" id="dutytime_start" name="dutytime_start" class="form-control required" placeholder="" value=""></div>
									</div>
									<div class="col-xs-6">
										<div class="padding-bottom-10 text-primary bold">업무종료시간</div>
										<div><input type="text" id="dutytime_end" name="dutytime_end" class="form-control required" placeholder="" value=""></div>
									</div>
								</div>
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary" id="btnSaveDept">저장</button>
						</div>
					</div>
				</div>
			</div>
			
			<!-- Modal : scheduleRegister2 개인 스케줄 등록 -->
			<div id="scheduleRegister2" class="modal fade modal-sm modal-schedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								스케줄 등록
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmSchedule2" name="frmSchedule2" action="" method="post">
								<input type="hidden" id="schedule_days" name="schedule_days" value="">
								<input type="hidden" id="dutytime_start" name="dutytime_start" value="">
								<input type="hidden" id="dutytime_end" name="dutytime_end" value="">
								
								<h4><i class="i-title i-2"></i>근무시간</h4>
								<div class="form-inline row">
									<div class="col-xs-6">
										<select class="form-control width-200 required" id="schedule_cd" name="schedule_cd" data-msg="근무시간을 선택해주세요.">
											<option value="">선택</option>
										</select>
									</div>
									<div class="col-xs-6" id="divDutytime" style="display: none;">
										<input type="text" class="form-control width-100" name="fromdt" id="fromdt" value="" autocomplete="off" placeholder="예) 09:30">
										<!-- <div class="pull-left margin-top-10 margin-left-10 margin-right-10">~</div -->
										<input type="text" class="form-control width-100" name="todt" id="todt" value="" autocomplete="off" placeholder="예) 18:30">
									</div>
								</div>
								<div class="info-dayoff">
									<ul class="clearfix">
										<li class="dayoff-1"><em>드림데이</em><span>주4일제 시행으로 진행되는 휴무</span></li>
										<li class="dayoff-4"><em>휴무(학)</em><span>기존 학원의 휴무 (1주 2일/ 본사의 경우 토,일에 해당)</span></li>
									</ul>
									<div>
										- 오늘 이후의 스케줄을 등록/수정 가능합니다.<br>
										- 드림데이는 1주일(일~토)에 1회만 등록 가능하며, 주중 2일(반차 2일 포함) 이상 휴가 사용시에는 설정이 불가능합니다.<br> 
										- 외근/외부교육시 출퇴근 기록과 연동되므로, 실제 참석 시간이 아닌 교통시간까지 더하여 입력합니다.<br>
									</div>
								</div>
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
							<button type="button" class="btn btn-primary" id="btnScheduleSave2">저장</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal : scheduleRegister2 스케줄 등록 -->
			
			<!-- Modal : holidayRegister 공휴일 등록 -->
			<div id="holidayRegister" class="modal fade modal-sm modal-schedule in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
			
						<!-- Modal Header -->
						<div class="modal-header">
							<h3 class="modal-title" id="myModalLabel">
								공휴일 등록
							</h3>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
						</div>
			
						<!-- Modal Body -->
						<div class="modal-body">
							<form id="frmHoliday" name="frmHoliday" action="" method="post" novalidate="novalidate">
								<input type="hidden" id="schedule_day" name="schedule_day" value="">
								
								<table class="tb-style1">
									<colgroup>
										<col width="150">
										<col width="*">
									</colgroup>
									<tbody>
										<tr>
											<th>공휴일유무</th>
											<td>
												<label class="checkbox" style="margin-bottom: -8px!important">
													<input type="checkbox" id="holiday_yn" name="holiday_yn" value="Y"> 
													<i></i> 공휴일
												</label>
											</td>
										</tr>
										<tr>
											<th>캘린더 노출 문구</th>
											<td>
												<input type="text" class="form-control full required" id="title" name="title" maxlength="10" autocomplete="off" data-msg="캘린더 노출문구를 입력해주세요." placeholder="띄어쓰기 포함 10자까지 입력가능합니다.">
											</td>
										</tr>
									</tbody>
								</table>
								
								<div class="area-btn">
									<button type="button" class="btn btn-primary" id="btnHolidaySave">저장</button>
								</div>
							</form>
						</div>
			
						<!-- Modal Footer -->
						<div class="modal-footer clearfix">
							<button type="button" class="btn btn-teal btn-cancel" data-dismiss="modal">취소</button>
						</div>
			
					</div>
				</div>
			</div>
			<!-- // Modal -->
			
			<!-- 스케줄 등록-->
			<script type="text/javascript">
				
				$(document).ready(function () {
					// 스케줄 등록 모달 show
					$('#scheduleRegister').on('shown.bs.modal', function (e) {
						// 외근교육 시간 입력 영역 비노출
						$("#scheduleRegister #divDutytime").hide();
						
						//부서
						$("#frmSchedule .dept").each(function(i){
							$(this).find("option").remove();
							var length = $("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").length;
							var newOptions = $("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").clone();
							$(this).append(newOptions);
							
							if(length > 0) $(this).show();
						});
						$("#frmSchedule #dept_idx").val($("#frm1 #dept_idx").val());
						
						//근무시간
						ajaxUtil.commonAjaxPost("/mngschedule/ajaxScheduleCodeList", null, $("#scheduleRegister #schedule_cd"), "", "근무시간/휴무/시간 선택");
						
						//선택 스케줄
						var schedule_days = "";
						$(".fc-body .fc-day-grid").find(".fc-row").each(function () {
							$(this).find("td").each(function name() {
								if($(this).hasClass("active")){
									var selected_day = new Date($(this).data("date"));
									schedule_days += (schedule_days == "") ? moment($(this).data("date")).format("YYYYMMDD") : "," + moment($(this).data("date")).format("YYYYMMDD");
								}
							});
						});
						$("#scheduleRegister #schedule_days").val(schedule_days);
					});
					
					//부서 셀렉트 선택 변경(공통)
					$("#frmSchedule .dept").on("change", function() {
						var formId = "#frmSchedule";
						var index = $(formId+" .dept").index($(this));
						var selectedItem = ($(this).val() == "" || $(this).val() == null) ? "" : $(this).val();
						fnc_changeDeptSelectBoxForSchdul(formId, index, selectedItem);
						
						setTimeout(function(){
							var isNext = ($(formId+" .dept").eq(index).find("option:selected").data("rfval1") == "Y") ? true : false;
							if(selectedItem != "" && isNext) {
								$(formId+" .dept").eq(index+1).trigger("change");
							}
							
							$("#frmSchedule #target_type option").eq(0).prop("selected", true);
							$("#frmSchedule #target_id option").not(":first").remove();
						}, 300);
					});
					
					// 스케줄 등록 > 대상구분 변경
					$("#target_type").on("change", function () {
						var type = $(this).val();
						var dept_idx = $("#frmSchedule #dept_idx").val();
						var url = (type == "emp") ? "/mngschedule/ajaxScheduleTargetList" : "/mngschedule/ajaxScheduleGroupList";
						
						if(type != ""){
							var selected_idxs = [];
							var index = 0;
							$("#frmSchedule .dept").each(function(i){
								if($(this).css("display") != "none") {
									if($(this).find(":selected").val() != "") {
										selected_idxs[i] = $(this).find(":selected").val();
									} else {
										var idxs = ""
										$(this).find("option").each(function(i){
											if($(this).val() != ""){
												idxs += ((i > 1 ) ? "," : "") + $(this).val();
											}
										});
										selected_idxs[i] = idxs;
									}
									index = i;
								}
							});
							var idxs = selected_idxs[index];
							
							param = { dept_idx : dept_idx, "dept_idxs" : idxs };
							ajaxUtil.commonAjaxPost(url, param, $("#frmSchedule #target_id"), "", "대상자");
						} else {
							$("#frmSchedule #target_id option").not(":first").remove();
						}
						
					});
					
					//스케줄 관리 대상자 변경
					$("#scheduleRegister #target_id").on("change", function () {
						var type = $("#scheduleRegister #target_type").val();
						
						if($(this).val() != ""){
							if(type == "group"){
								//그룹 대상자 조회
								var dept_idx = $("#frmSchedule #dept_idx").val();
								var group_idx = $(this).val();
								
								var selected_idxs = [];
								var index = 0;
								$("#frmSchedule .dept").each(function(i){
									if($(this).css("display") != "none") {
										if($(this).find(":selected").val() != "") {
											selected_idxs[i] = $(this).find(":selected").val();
										} else {
											var idxs = ""
											$(this).find("option").each(function(i){
												if($(this).val() != ""){
													idxs += ((i > 1 ) ? "," : "") + $(this).val();
												}
											});
											selected_idxs[i] = idxs;
										}
										index = i;
									}
								});
								var idxs = selected_idxs[index];
			
								param = { dept_idx: dept_idx, group_idx : group_idx, dept_idxs : idxs }
								$.post("/mngschedule/ajaxScheduleTargetList", param, function(data) {
									$("#ulTarget li").remove();
									for(var i = 0; i < data.length; i++){
										fnc_addRowTargetIdForMngschedule(data[i].text, data[i].value, type);
									}
								});
							} else {
								//개인 대상자 조회
								var ldap_id = $(this).val(); 
								var emp_name = $("#scheduleRegister #target_id option:selected").text();
								
								var b = true;
								$("#ulTarget").find("input").each(function () {
									if($(this).val() == ldap_id){
										b = false;
									}
								});
								
								if(b){
									//대상자추가
									fnc_addRowTargetIdForMngschedule(emp_name, ldap_id, type);
								} else {
									fnc_toastMsgForWarning("이미 추가된 대상자입니다.");
									return false;
								}
								
							}
							
						} else {
							$("#ulTarget li").remove();
						}
					});
					
					//저장
					$("#btnScheduleSave").on("click", function () {
						if(fnc_isValidInputForSchedule()){
							var schedule_cd = $("#frmSchedule #schedule_cd").val();
							if(schedule_cd == "SC001" || schedule_cd == "SC006" || schedule_cd == "SC007"){
								var dutytime_start = "";
								var dutytime_end = "";
								if(schedule_cd == "SC001"){
									var schedule_txt = $("#frmSchedule #schedule_cd option:selected").text();
									dutytime_start = schedule_txt.split("~")[0];
									dutytime_end = schedule_txt.split("~")[1];
								} else {
									dutytime_start = $("#frmSchedule #fromdt").val();
									dutytime_end = $("#frmSchedule #todt").val();
								}
								$("#frmSchedule #dutytime_start").val(dutytime_start);
								$("#frmSchedule #dutytime_end").val(dutytime_end);
							}
							
							var dataArray = $("#frmSchedule").serializeArray();
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/mngschedule/ajaxSaveSchedule"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												var failCnt = Number(data.failCnt);
												
												if(failCnt > 0){
													var msg = "※ 등록 실패<br/>";
													var failiMsg = data.failMsg;
													var failList = failiMsg.split(",");
													for(i in failList){
														var failInfo = failList[i].split("_");
														msg += failInfo[0] + " | " + failInfo[1] + "<br/>"
														switch(failInfo[2]){
															case "O" :
																msg += ": 결재 대기 중인 휴가 혹은 등록된 휴가 스케줄이 있습니다.<br/>";
																break;
															case "H" :
																msg += ": 공휴일이 있는 주는 드림데이 등록이 불가합니다.<br/>";
																break;
															case "W" :
																msg += ": 결재대기 중인 휴가내역이 있습니다..<br/>";
																break;
															case "A" : 
																msg += ": 휴가가 2일 이상 있는 주는 드림데이 등록이 불가합니다.<br/>";
																break;
															case "L" : 
																msg += ": 드림데이 사용을 못하는  휴가내역이 있습니다.<br/>"
																break;
															case "D" :
																msg += ": 드림데이는 한주 기준으로 1회만 등록가능합니다.<br/>";
																break;
															case "N" :
																msg += ": 이미 등록된 근무 스케줄이 있습니다.<br/>";
																break;
														}
													}
													
													fnc_toastMsgForWarning2(msg);
												} else {
													fnc_toastMsgForResult("저장되었습니다.");
												}
												
												//모달 hide
												$('#scheduleRegister').modal('hide');
												
												var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
												var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
												fnc_getSchedule(startDate, endDate);
												
												//선택 class 제거
												$(".fc-day").removeClass("active");
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						}
					});
					
					$("#frmSchedule").validate({	
						errorPlacement: function(error, element) {
							// do nothing
						},
						highlight: function(element, errorClass, validClass) {
							$(element).addClass('error').removeClass(validClass);
						}
					});
					
					//그룹관리 모달 close
					$("#scheduleRegister").on('hide.bs.modal', function() {
						$("#frmSchedule #schedule_days").val("");
						$("#frmSchedule #target_type").val("").prop("selected", true);
						$("#frmSchedule #target_id option").not(":first").remove();
						$("#ulTarget li").remove();
					});
					
					// 근무시간 변경
					$("#scheduleRegister #schedule_cd").on("change", function(){
						if($(this).val() == "SC006" || $(this).val() == "SC007"){
							$("#frmSchedule #fromdt").val(""); 
							$("#frmSchedule #todt").val("");
							$("#scheduleRegister #divDutytime").show();
						} else {
							$("#scheduleRegister #divDutytime").hide();
						}
					});
					
					
				});
				
				// 대상자 추가
				function fnc_addRowTargetIdForMngschedule(emp_name, ldap_id, type) {
					var li = "";
					li += "<li>";
					li += "		<span>" + emp_name + "</span>";
					li += "		<button type='button' class='btn btn-del' onclick='javascript:fnc_removeRowTargetIdForMngschedule($(this))' >삭제</button>";
					li += "		<input type='hidden' id='ldap_id' name='ldap_id' value='" + ldap_id + "'>";
					li += "</li";
					li += "";
					li += "";
					
					$("#ulTarget").append(li);
					if(type != "group"){
						$("#scheduleRegister #target_id").val("").prop("selected", true);
					}
					
				}
				
				//유효성검증
				function fnc_isValidInputForSchedule() {
					var b = false;
					if($("#frmSchedule").valid()){
						b = true;
					} else {
						fnc_toastMsgForWarning($("#frmSchedule #schedule_cd").data("msg"));
						return false;
					}
					
					if(b){
						if($("#ulTarget input[name=ldap_id]").length > 0){
							b = true;
						} else {
							fnc_toastMsgForWarning("대상자가 존재하지 않습니다.");
							return false;
						}
						
						var schedule_cd = $("#frmSchedule #schedule_cd").val();
						if(schedule_cd == "SC006" || schedule_cd == "SC007"){
							var timeFormat = /^([1-9]|[01][0-9]|2[0-3]):([0-5][0-9])$/;
							if(!timeFormat.test( $("#frmSchedule #fromdt").val() ) || $("#frmSchedule #fromdt").val().length != 5){
								$("#frmSchedule #fromdt").addClass("error");
								$("#frmSchedule #fromdt").focus();
								fnc_toastMsgForWarning("시작 시간 형식이 올바르지 않습니다.<br/>(ex. hh:mm)");
								return false;
							}
							
							if(!timeFormat.test( $("#frmSchedule #todt").val() ) || $("#frmSchedule #todt").val().length != 5){
								$("#frmSchedule #todt").addClass("error");
								$("#frmSchedule #todt").focus();
								fnc_toastMsgForWarning("종료 시간 형식이 올바르지 않습니다.<br/>(ex. hh:mm)");
								return false;
							}
						}
					}
					
					return b;
				}
				
				// 대상자 삭제
				function fnc_removeRowTargetIdForMngschedule(el) {
					$(el).closest("li").remove();
				}
			</script>
			<!-- // 스케줄 등록-->
			
			<!--  그룹관리  -->
			<script type="text/javascript">
				$(document).ready(function () {
					// 그룹 관리 모달 show
					$('#scheduleGroup').on('shown.bs.modal', function (e) {
						//부서
						$("#frmGroup .dept").each(function(i){
							$(this).find("option").remove();
							var newOptions = $("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").clone();
							$(this).append(newOptions);
							
							if($("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").length == 0) $(this).hide();
						});
						$("#frmGroup #dept_idx").val($("#frm1 #dept_idx").val());
						
						//대상자
						fnc_getTargetEmpList();
						
						// 그룹 목록
						fnc_getGroupList($("#frmGroup #dept_idx").val());
					});
					
					//부서 셀렉트 선택 변경(공통)
					$("#frmGroup .dept").on("change", function() {
						var formId = "#frmGroup"
						var index = $(formId+" .dept").index($(this));
						var selectedItem = ($(this).val() == "" || $(this).val() == null) ? "" : $(this).val();
						fnc_changeDeptSelectBoxForSchdul(formId, index, selectedItem);
						
						// 셀렉트 박스 비게시
						setTimeout(function(){
							var isNext = ($(formId+" .dept").eq(index).find("option:selected").data("rfval1") == "Y") ? true : false;
							if(selectedItem != "" && isNext) {
								$(formId+" .dept").eq(index+1).trigger("change");
							}
						}, 300);
						
						setTimeout(function(){
							// 대상자 조회
							fnc_getTargetEmpList();
							
							// 그룹 목록
							fnc_getGroupList($("#scheduleGroup #dept_idx").val());
						}, 200);
					});
					
					// 대상자 추가
					$("#scheduleGroup #target_id").on("change", function () {
						var ldap_id = $(this).val();
						var emp_name = $("#scheduleGroup #target_id option:selected").text();
						
						
						if(ldap_id != ""){
							var b = true;
							$("#ulGroupRegister").find("input").each(function () {
								if($(this).val() == ldap_id){
									b = false;
								}
							});
							
							if(b){
								//대상자추가
								fnc_addRowTargetIdForMnggroup(emp_name, ldap_id);
							} else {
								fnc_toastMsgForWarning("이미 추가된 대상자입니다.");
								return false;
							}
						} else {
							if(emp_name != "대상자"){
								fnc_toastMsgForWarning("AD아이디가 존재하지 않습니다.");
								$("#scheduleGroup #target_id option").eq(0).prop("selected", true);
								return false;
							}
						}
					});
					
					//저장
					$("#btnGroupSave").on("click", function () {
						if(fnc_isValidInputForGroup()){
							var dataArray = $("#frmGroup").serializeArray();
							
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/mngschedule/ajaxSaveScheduleGroup"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												fnc_toastMsgForResult("저장 되었습니다.");
												
												$("#frmGroup #title").val("");
												$("#frmGroup #group_idx").val("");
												$("#frmGroup #ulGroupRegister").find("li").remove();
												
												//그룹영역 조회
												fnc_getGroupList($("#frmGroup #dept_idx").val());
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						}
					});
					
					$("#frmGroup").validate({	
						errorPlacement: function(error, element) {
							// do nothing
						},
						highlight: function(element, errorClass, validClass) {
							$(element).addClass('error').removeClass(validClass);
						}
					});
					
					//그룹관리 모달 close
					$("#scheduleGroup").on('hide.bs.modal', function() {
						$("#frmGroup #title").val("");
						$("#frmGroup #group_idx").val("");
						$("#ulGroupRegister li").remove();
					});
				});
				
				// 대상자 추가
				function fnc_addRowTargetIdForMnggroup(emp_name, ldap_id) {
					var li = "";
					li += "<li>";
					li += "		<span>" + emp_name + "</span>";
					li += "		<button type='button' class='btn btn-del' onclick='fnc_removeRowTargetIdForMnggroup($(this));'>삭제</button>";
					li += "		<input type='hidden' id='ldap_id' name='ldap_id' value='" + ldap_id + "'>";
					li += "</li>";
					
					$("#ulGroupRegister").append(li);
					$("#scheduleGroup #target_id option").eq(0).prop("selected", true);
				}
				
				// 대상자 삭제
				function fnc_removeRowTargetIdForMnggroup(el) {
					$(el).closest("li").remove();
				}
				
				// 그룹관리 유효성
				function fnc_isValidInputForGroup() {
					var b = false;
					if($("#frmGroup").valid()){
						b = true;
					} else {
						fnc_toastMsgForWarning($("#frmGroup #title").data("msg"));
						return false;
					}
					
					if(b){
						if($("#ulGroupRegister input[name=ldap_id]").length > 0){
							b = true;
						} else {
							fnc_toastMsgForWarning("대상자가 존재하지 않습니다.");
							return false;
						}
					}
					
					return b;
				}
				
				// 그룹 목록 조회
				function fnc_getGroupList(dept_idx) {
					param = { dept_idx : dept_idx };
					$.post("/mngschedule/blankScheduleGroupListForMnggroup", param, function(data) {
						$("#divGroupList").html(data);
					});
				}
				
				// 대상자 조회
				function fnc_getTargetEmpList() {
					var dept_idx = $("#frmGroup #dept_idx").val()
					var selected_idxs = [];
					var index = 0;
					$("#frmGroup .dept").each(function(i){
						if($(this).css("display") != "none") {
							if($(this).find(":selected").val() != "") {
								selected_idxs[i] = $(this).find(":selected").val();
							} else {
								var idxs = ""
								$(this).find("option").each(function(i){
									if($(this).val() != ""){
										idxs += ((i > 1 ) ? "," : "") + $(this).val();
									}
								});
								selected_idxs[i] = idxs;
							}
							index = i;
						}
					});
					var idxs = selected_idxs[index];
					
					
					param = { dept_idx : dept_idx, "dept_idxs" : idxs };
					ajaxUtil.commonAjaxPost("/mngschedule/ajaxScheduleTargetList", param, $("#frmGroup #target_id"), "", "대상자");
					
					setTimeout(function(){
						$("#frmGroup #target_id option").eq(0).prop("selected", true);
					},100);
				}
			</script>
			<!--  // 그룹관리  -->
			
			<!-- 스케줄 변경  -->
			<script type="text/javascript">
				$(document).ready(function () {
					//저장
					$("#btnScheduleMod").on("click", function () {
						if(fnc_isValidInputForScheduleMod()){
							var schedule_cd = $("#frmScheduleMod #schedule_cd").val();
							if(schedule_cd == "SC001" || schedule_cd == "SC006" || schedule_cd == "SC007"){
								var dutytime_start = "";
								var dutytime_end = "";
								var schedule_txt = $("#frmScheduleMod #schedule_cd option:selected").text();
								
								if(schedule_cd == "SC001"){
									dutytime_start = schedule_txt.split("~")[0];
									dutytime_end = schedule_txt.split("~")[1];
								} else {
									dutytime_start = $("#frmScheduleMod #fromdt").val();
									dutytime_end = $("#frmScheduleMod #todt").val();
								}
								
								$("#frmScheduleMod #dutytime_start").val(dutytime_start);
								$("#frmScheduleMod #dutytime_end").val(dutytime_end);
							}
							
							var dataArray = $("#frmScheduleMod").serializeArray();
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/mngschedule/ajaxUpdateSchedule"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												if(data.dayStatus != "Y"){
													var msg = "";
													switch(data.dayStatus){
														case "O" :
															msg += ": 결재 대기 중인 휴가 혹은 등록된 휴가 스케줄이 있습니다.<br/>";
															break;
														case "H" :
															msg = "공휴일이 있는 주는 드림데이 등록이 불가합니다.<br/>";
															break;
														case "W" :
															msg += ": 결재대기 중인 휴가내역이 있습니다..<br/>";
															break;
														case "A" : 
															msg = "휴가가 2일 이상 있는 주는 드림데이 등록이 불가합니다.<br/>";
															break;
														case "L" : 
															msg = "드림데이 사용을 못하는  휴가내역이 있습니다.<br/>"
															break;
														case "D" :
															msg = "드림데이는 한주 기준으로 1회만 등록가능합니다.<br/>";
															break;
														case "N" :
															msg = "이미 등록된 스케줄이 있습니다.<br/>";
															break;
													}
													fnc_toastMsgForWarning2(msg);
												} else {
													fnc_toastMsgForResult("저장 되었습니다.");
												}
												
												//모달 hide
												$('#scheduleModify').modal('hide');
												//캘린더 리프레시
												var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
												var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
												fnc_getSchedule(startDate, endDate);
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						}
					});
					
					$("#frmScheduleMod").validate({	
						errorPlacement: function(error, element) {
							// do nothing
						},
						highlight: function(element, errorClass, validClass) {
							$(element).addClass('error').removeClass(validClass);
						}
					});
					
					//근무시간 변경
					$("#frmScheduleMod #schedule_cd").on("change", function(){
						if($(this).val() == "SC006" || $(this).val() == "SC007"){
							$("#frmScheduleMod #fromdt").val(""); 
							$("#frmScheduleMod #todt").val("");
							$("#scheduleModify #divDutytime").show();
						} else {
							$("#scheduleModify #divDutytime").hide();
						}
					});
				});
				
				//스케줄 변경 유효성검사
				function fnc_isValidInputForScheduleMod() {
					if($("#frmScheduleMod").valid()){
						return true;
					} else {
						fnc_toastMsgForWarning("근무시간을 선택해주세요.");
						return false;
					}
				}
			</script>
			<!-- // 스케줄 변경  -->
			
			<!-- 스케줄 엑셀 업로드 -->
			<script type="text/javascript">
				
				$(document).ready(function () {
					$("#scheduleUpload").on('shown.bs.modal', function() {
						//부서
						$("#scheduleUpload .dept").each(function(i){
							$(this).find("option").remove();
							var newOptions = $("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").clone();
							$(this).append(newOptions);
							
							if($("#frm1 .dept").eq(i).find("option:selected[data-rfval2='Y']").length == 0) {
								$(this).hide();
							} else {
								$(this).show();
							}
						});
						$("#scheduleUpload #dept_idx").val($("#frm1 #dept_idx").val());
					});
					
					//부서 셀렉트 선택 변경(공통)
					$("#frmForImportToExcel .dept").on("change", function() {
						var formId = "#frmForImportToExcel";
						var index = $(formId+" .dept").index($(this));
						var selectedItem = ($(this).val() == "" || $(this).val() == null) ? "" : $(this).val();
						fnc_changeDeptSelectBoxForSchdul(formId, index, selectedItem);
						
						setTimeout(function(){
							var isNext = ($(formId+" .dept").eq(index).find("option:selected").data("rfval1") == "Y") ? true : false;
							if(selectedItem != "" && isNext) {
								$(formId+" .dept").eq(index+1).trigger("change");
							}
						}, 300);
					});
					
					//샘플 다운로드
					$("#btnSampleDownload").on("click", function () {
						var selected_idxs = [];
						var index = 0;
						$("#frmForImportToExcel .dept").each(function(i){
							if($(this).css("display") != "none") {
								if($(this).find(":selected").val() != "") {
									selected_idxs[i] = $(this).find(":selected").val();
								} else {
									var idxs = ""
									$(this).find("option").each(function(i){
										if($(this).val() != ""){
											idxs += ((i > 1 ) ? "," : "") + $(this).val();
										}
									});
									selected_idxs[i] = idxs;
								}
								index = i;
							}
						});
						var idxs = selected_idxs[index];
						$("#frmForImportToExcel #dept_idxs").val(idxs);
						
						$("#frmForImportToExcel").attr("action", "/mngschedule/scheduleUploadSampleDownload");
						$("#frmForImportToExcel").submit();
					});
					
					//등록버튼 클릭
					$("#btnImportToExcel").click(function () {
						var frm1 = document.getElementById("frmForImportToExcel");
						var dataArray = new FormData(frm1);
						
						$.ajax({
							type:"post"
							,url:"/mngschedule/importExcelEmployeeSchedule"
							,data: dataArray
							,dataType:"json"
							,enctype: 'multipart/form-data'
							,processData: false
							,contentType:false
							,success: function(data) {
								var msg = data.returnMsg;
								
								if(data.returnCd =="1000") {
									var failCnt = Number(data.failCnt);
									console.log(failCnt);
									if(failCnt > 0){
										var msg = "※ 등록 실패<br/>";
										var failiMsg = data.failMsg;
										var failList = failiMsg.split(",");
										for(i in failList){
											var failInfo = failList[i].split("_");
											msg += failInfo[0] + " | " + failInfo[1] + "<br/>"
											switch(failInfo[2]){
												case "O" :
													msg += ": 결재 대기 중인 휴가 혹은 등록된 휴가 스케줄이 있습니다.<br/>";
													break;
												case "H" :
													msg += ": 공휴일이 있는 주는 드림데이 등록이 불가합니다.<br/>";
													break;
												case "W" :
													msg += ": 결재대기 중인 휴가내역이 있습니다..<br/>";
													break;
												case "A" : 
													msg += ": 휴가가 2일 이상 있는 주는 드림데이 등록이 불가합니다.<br/>";
													break;
												case "L" : 
													msg += ": 드림데이 사용을 못하는  휴가내역이 있습니다.<br/>"
													break;
												case "D" :
													msg += ": 드림데이는 한주 기준으로 1회만 등록가능합니다.<br/>";
													break;
												case "N" :
													msg += ": 이미 등록된 스케줄이 있습니다.<br/>";
													break;
											}
										}
										
										fnc_toastMsgForWarning2(msg);
									} else {
										fnc_toastMsgForResult(msg);
									}
									
									$("#scheduleUpload").modal('hide');
									setTimeout(function () {
										var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
										var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
										fnc_getSchedule(startDate, endDate);
									}, 200);
								} else {
									fnc_toastMsgForWarning(msg);
									fnc_divDimmedRemove("#scheduleUpload");
								}
							}
							,error: function(data, status, err) {
								fnc_toastMsgForWarning(err);
								fnc_divDimmedRemove("#scheduleUpload");
							}
						});
					});
					
					//스케줄 엑셀 업로드 모달 close
					$("#scheduleUpload").on('hide.bs.modal', function() {
						$("#frmForImportToExcel").find("input").val("");
					});
				});
				
				//파일 형식 체크
				function fnc_checkUploadFile() {
					var fi = document.getElementById("file1");
					
					//type 체크
					var type = fi.files[0].type;
					var allowType = ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
					if(allowType.indexOf(type) == -1) {
						fnc_toastMsgForWarning("파일은 엑셀 형식(.xls, .xlsx)만 가능합니다.");
						fi.value = "";
						return false;
					}
					
					//size 체크
					var size = fi.files[0].size;
					var allowSize = 10485760;	
					if(allowSize < size) {
						fnc_toastMsgForWarning("파일 용량은 최대 10MB 입니다.");
						fi.value = "";
						return false;
					}
					
					//파일명 출력
					$("#filename").val(fi.files[0].name);
				}
				
				
			</script>
			<!-- // 스케줄 엑셀 업로드 -->
			
			<!-- 기본업무 시간   -->
			<script type="text/javascript">
				$(document).ready(function () {
					// 기본 업무시간 설정 모달 show
					$("#scheduleBaseSet").on("shown.bs.modal", function () {
						var dept_idx = $("#frm1 #dept_idx").val();
						
						param = { dept_idx : dept_idx }
						$.post("/mngschedule/ajaxDepartmentInfo", param, function(data) {
							var team_name = data.TEAM_NAME;
							$("#frmScheduleBasic #dept_idx").val(dept_idx);
							$("#scheduleBaseSet #myModalLabel").text(team_name + " 기본 업무 시간");
							$("#frmScheduleBasic #dutytime_start").val(data.DUTYTIME_START);
							$("#frmScheduleBasic #dutytime_end").val(data.DUTYTIME_END);
						});
					});
					
					//저장
					$("#btnSaveDept").on("click", function () {
						if(fnc_isValidInputForScheduleBasic()){
							var dataArray = $("#frmScheduleBasic").serializeArray();
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/mngschedule/ajaxUpdateDeptDutytime"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												fnc_toastMsgForResult("저장 되었습니다.");
												
												//모달 hide
												$('#scheduleBaseSet').modal('hide');
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						}
					});
					
					$("#frmScheduleBasic").validate({	
						errorPlacement: function(error, element) {
							// do nothing
						},
						highlight: function(element, errorClass, validClass) {
							$(element).addClass('error').removeClass(validClass);
						}
					});
				});
				
				//기본설정 유효성 검사
				function fnc_isValidInputForScheduleBasic() {
					if($("#frmScheduleBasic").valid()){
						return true;
					} else {
						fnc_toastMsgForWarning("기본 업무시간을 입력해주세요.");
						return false;
					}
				}
			</script>
			<!-- // 기본업무 시간   -->
			
			<!-- 개인 스케줄 등록 -->
			<script type="text/javascript">
				$(document).ready(function(){
					// 스케줄 등록 모달 show
					$('#scheduleRegister2').on('shown.bs.modal', function (e) {
						//근무시간
						ajaxUtil.commonAjaxPost("/mngschedule/ajaxScheduleCodeList", null, $("#scheduleRegister2 #schedule_cd"), "", "선택");
						
						//근무시간 입력 비노출
						$("#scheduleRegister2 #divDutytime").hide();
						
						//선택 스케줄
						var schedule_days = "";
						$(".fc-body .fc-day-grid").find(".fc-row").each(function () {
							$(this).find("td").each(function name() {
								if($(this).hasClass("active")){
									var selected_day = new Date($(this).data("date"));
									schedule_days += (schedule_days == "") ? moment($(this).data("date")).format("YYYYMMDD") : "," + moment($(this).data("date")).format("YYYYMMDD");
								}
							});
						});
						$("#scheduleRegister2 #schedule_days").val(schedule_days);
					});
					
					// 근무시간 변경
					$("#scheduleRegister2 #schedule_cd").on("change", function(){
						if($(this).val() == "SC006" || $(this).val() == "SC007"){
							$("#frmSchedule2 #fromdt").val(""); 
							$("#frmSchedule2 #todt").val("");
							$("#scheduleRegister2 #divDutytime").show();
						} else {
							$("#scheduleRegister2 #divDutytime").hide();
						}
					});
					
					// 스케줄 저장
					$("#btnScheduleSave2").on("click", function(){
						if(fnc_isValidInputForScheduleEmp()){
							var schedule_cd = $("#frmSchedule2 #schedule_cd").val();
							if(schedule_cd == "SC001" || schedule_cd == "SC006" || schedule_cd == "SC007"){
								var dutytime_start = "";
								var dutytime_end = "";
								if(schedule_cd == "SC001"){
									var schedule_txt = $("#frmSchedule2 #schedule_cd option:selected").text();
									dutytime_start = schedule_txt.split("~")[0];
									dutytime_end = schedule_txt.split("~")[1];
								} else {
									dutytime_start = $("#frmSchedule2 #fromdt").val();
									dutytime_end = $("#frmSchedule2 #todt").val();
								}
								
								$("#frmSchedule2 #dutytime_start").val(dutytime_start);
								$("#frmSchedule2 #dutytime_end").val(dutytime_end);
							}
							
							var dataArray = $("#frmSchedule2").serializeArray();
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/mngschedule/ajaxSaveScheduleForEmp"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												var failCnt = Number(data.failCnt);
												if(failCnt > 0){
													var msg = "※ 등록 실패<br/>";
													var failiMsg = data.failMsg;
													var failList = failiMsg.split(",");
													for(i in failList){
														var failInfo = failList[i].split("_");
														msg += failInfo[0] + " | " + failInfo[1] + "<br/>"
														switch(failInfo[2]){
															case "O" :
																msg += ": 결재 대기 중인 휴가 혹은 등록된 휴가 스케줄이 있습니다.<br/>";
																break;
															case "H" :
																msg += ": 공휴일이 있는 주는 드림데이 등록이 불가합니다.<br/>";
																break;
															case "W" :
																msg += ": 결재대기 중인 휴가내역이 있습니다..<br/>";
																break;
															case "A" : 
																msg += ": 휴가가 2일 이상 있는 주는 드림데이 등록이 불가합니다.<br/>";
																break;
															case "L" : 
																msg += ": 드림데이 사용을 못하는  휴가내역이 있습니다.<br/>"
																break;
															case "D" :
																msg += ": 드림데이는 한주 기준으로 1회만 등록가능합니다.<br/>";
																break;
															case "N" :
																msg += ": 이미 등록된 스케줄이 있습니다.<br/>";
																break;
														}
													}
													
													fnc_toastMsgForWarning2(msg);
												} else {
													fnc_toastMsgForResult("저장 되었습니다.");
												}
												
												
												//모달 hide
												$('#scheduleRegister2').modal('hide');
												
												//캘린더 리프레시
												setTimeout(function(){
													var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
													var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
													fnc_getSchedule(startDate, endDate);
												}, 300);
												
												//선택 class 제거
												$(".fc-day").removeClass("active");
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						} 
					});
					
					//유효성검증
					function fnc_isValidInputForScheduleEmp() {
						var b = false;
						if($("#frmSchedule2").valid()){
							b = true;
						} else {
							fnc_toastMsgForWarning($("#frmSchedule2 #schedule_cd").data("msg"));
							return false;
						}
						
						if(b){
							var schedule_cd = $("#frmSchedule2 #schedule_cd").val();
							if(schedule_cd == "SC006" || schedule_cd == "SC007"){
								var timeFormat = /^([1-9]|[01][0-9]|2[0-3]):([0-5][0-9])$/;
								if(!timeFormat.test( $("#frmSchedule2 #fromdt").val() ) || $("#frmSchedule2 #fromdt").val().length != 5){
									$("#frmSchedule2 #fromdt").addClass("error");
									$("#frmSchedule2 #fromdt").focus();
									fnc_toastMsgForWarning("시작 시간 형식이 올바르지 않습니다.<br/>(ex. hh:mm)");
									return false;
								}
								
								if(!timeFormat.test( $("#frmSchedule2 #todt").val() ) || $("#frmSchedule2 #todt").val().length != 5){
									$("#frmSchedule2 #todt").addClass("error");
									$("#frmSchedule2 #todt").focus();
									fnc_toastMsgForWarning("종료 시간 형식이 올바르지 않습니다.<br/>(ex. hh:mm)");
									return false;
								}
							}
						}
						
						return b;
					}
				});
			</script>
			<!-- // 개인 스케줄 등록 -->
			
			<script type="text/javascript">
			
				$(document).ready(function(){
					// 공휴일 등록 모달 오픈
					$("#btnHoliday").on("click", function(){
						var selected_day = "";
						//선택 날짜 get
						var selected_cnt = 0;
						$(".fc-body .fc-day-grid").find(".fc-row").each(function () {
							$(this).find("td").each(function name() {
								if($(this).hasClass("active")){
									selected_cnt++;
									if(selected_cnt == 1){
										selected_day = $(this).data("date");
									}
									
								}
							});
						});
						
						if(selected_cnt == 1){
							fnc_openModalForHoliday(selected_day, "", "");
						} else if (selected_cnt > 1){
							fnc_toastMsgForWarning("공휴일 등록 날짜는 1개만 선택해주세요.");
							return false;
						} else {
							fnc_toastMsgForWarning("스케줄 등록할 날짜를 선택해주세요.");
							return false;
						}
					});
					
					// 저장
					$("#btnHolidaySave").on("click", function () {
						if(fnc_isValidInputForHoliday()){
							$("#frmHoliday #schedule_day").val();
							var dataArray = $("#frmHoliday").serializeArray();
							bConfirm("저장하시겠습니까?").done(function(s) {
								if(s) {
									$.ajax({
										type : "post"
										,async : false
										,url : "/manage/hrschedule/ajaxSaveHoliday"
										,data : dataArray
										,dataType : "json"
										,success : function(data) {
											var result = data.result;
											
											if(result == 1){
												fnc_toastMsgForResult("저장 되었습니다.");
												
												//모달 hide
												$('#holidayRegister').modal('hide');
												//캘린더 리프레시
												var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
												var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
												fnc_getSchedule(startDate, endDate);
												
												//선택 class 제거
												$(".fc-day").removeClass("active");
											} else {
												fnc_toastMsgForWarning("실패 하였습니다.");
												return false;
											}
										}
										,error : function(data, status, err) {
										
										} 
									});
								}
							});
						}
					});
					
					//그룹관리 모달 close
					$("#holidayRegister").on('hide.bs.modal', function() {
						$("#frmHoliday #schedule_day").val("");
						$("#frmHoliday #title").val("");
						$("#frmHoliday #holiday_yn").prop("checked", false);
					});
					
					$("#frmHoliday").validate({	
						errorPlacement: function(error, element) {
							// do nothing
						},
						highlight: function(element, errorClass, validClass) {
							$(element).addClass('error').removeClass(validClass);
						}
					});
					
				});
				
				//공휴일 저장
				function fnc_isValidInputForHoliday() {
					if($("#frmHoliday").valid()){
						return true;
					} else {
						fnc_toastMsgForWarning($("#frmHoliday #title").data("msg"));
						return false;
					}
				}
				
				//모달 오픈
				function fnc_openModalForHoliday(schedule_day, info, flag) {
					if(flag == "M"){
						// 수정
						var title = info.split("|")[0];
						var isChecked = (info.split("|")[1] == "Y") ? true : false;
						
						$("#frmHoliday #holiday_yn").prop("checked", isChecked);
						$("#frmHoliday #title").val(title);
					} else {
						// 등록
						schedule_day = moment(schedule_day).format("YYYYMMDD");
					}
					
					$("#frmHoliday #schedule_day").val(schedule_day);
					$("#holidayRegister").modal("show");
				}
				
				//공휴일 삭제
				function fnc_removeHoliday(schedule_day) {
					bConfirm("삭제하시겠습니까?").done(function(s) {
						if(s) {
							$.ajax({
								type : "post"
								,async : false
								,url : "/manage/hrschedule/ajaxRemoveHoliday"
								,data : { schedule_day : schedule_day }
								,dataType : "json"
								,success : function(data) {
									var result = data.result;
									
									if(result == 1){
										fnc_toastMsgForResult("삭제 되었습니다.");
										
										//캘린더 리프레시
										var startDate = moment($('#calendar').fullCalendar('getView').start).format("YYYYMMDD");
										var endDate = moment($('#calendar').fullCalendar('getView').end).add(-1,"days").format("YYYYMMDD");
										fnc_getSchedule(startDate, endDate);
									} else {
										fnc_toastMsgForWarning("실패 하였습니다.");
										return false;
									}
								}
								,error : function(data, status, err) {
								
								} 
							});
						}
					});
				}
			</script>
	</section>
	<!-- // middle -->
</div>
<!-- // wrapper -->

</body>
</html>