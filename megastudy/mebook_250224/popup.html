<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMEGA 모의고사 성적표</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="omega-popup">
		<div class="popup-wrap">

			<div class="popup-header">
				<h1>OMEGA 모의고사 성적표</h1>
				<button class="close-btn"><span class="blind">닫기</span></button>
			</div>
	
			<div class="popup-content">
				<div class="popup-border-box">
					<!-- pc-only -->
					<div class="popup-table student-info pc-only">
						<div class="table-container">
							<div class="table-caption blind">OMEGA 모의고사 성적표</div>
							<div class="table-row header">
								<div class="cell">학원</div>
								<div class="cell">학번</div>
								<div class="cell">이름</div>
								<div class="cell">시행 연도</div>
								<div class="cell">유형</div>
								<div class="cell">회차</div>
								<div class="cell">과목</div>
							</div>
							
							<div class="table-row">
								<div class="cell clamp">러셀 기숙<br>(여학생 수학 전문관)</div>
								<div class="cell">123456</div>
								<div class="cell">박메가</div>
								<div class="cell">2025년</div>
								<div class="cell">OMEGA_BLUE</div>
								<div class="cell">6</div>
								<div class="cell clamp">언어와매체</div>
							</div>
						</div>
					</div>
					<!-- // pc-only -->
					<!-- mo-only -->
					<div class="my-table mo-only">
						<table>
							<colgroup>
								<col style="width: 40%;">
								<col style="width: 60%;">
							</colgroup>
							<tbody>
								<tr>
									<th>학원</th>
									<td class="taL">
										<span class="clamp">러셀 기숙<br> (여학생 수학 전문관)</span>
									</td>
								</tr>
								<tr>
									<th>학번</th>
									<td class="taL">123456</td>
								</tr>
								<tr>
									<th>이름</th>
									<td class="taL">박메가</td>
								</tr>
								<tr>
									<th>시행 연도</th>
									<td class="taL">2025년</td>
								</tr>
								<tr>
									<th>유형</th>
									<td class="taL">OMEGA_BLUE</td>
								</tr>
								<tr>
									<th>회차</th>
									<td class="taL">6</td>
								</tr>
								<tr>
									<th>과목</th>
									<td class="taL"><span class="clamp">언어와매체</span></td>
								</tr>
							</tbody>
						</table>
						
					</div>
					<!-- // mo-only -->
				</div>
	
				<div class="popup-border-box">

					<!-- pc-only -->
					<div class="popup-table score-summary pc-only">
						<div class="table-container">
							<div class="table-caption blind">OMEGA 모의고사 성적표</div>

							<div class="table-row header">
								<div class="cell-2">
									<div class="cell blue-grey">원점수</div>
									<div class="cell">
										<div class="cell">합계</div>
										<div class="cell">공통</div>
										<div class="cell">선택</div>
									</div>
								</div>
								<div class="cell-1"><div class="cell">상위 10% 평균</div></div>
								<div class="cell-1"><div class="cell">상위 30% 평균</div></div>
								<div class="cell-1"><div class="cell">전체 평균</div></div>
							</div>
							<div class="table-row">
								<div class="cell">75점</div>
								<div class="cell">55점</div>
								<div class="cell">20점</div>
								<div class="cell">89점</div>
								<div class="cell">77점</div>
								<div class="cell">64.6점</div>
							</div>
						</div>
						
					</div>
					<!-- // pc-only -->

					<!-- mo-only -->
					<div class="my-table mo-only">
						<table>
							<colgroup>
								<col style="width: 45%;">
								<col style="width: 55%;">
							</colgroup>
							<tbody>
								<tr>
									<th>원점수</th>
									<td class="taL">
										합계 75점<br>
										공통 55점<br>
										선택 20점<br>
									</td>
								</tr>
								<tr>
									<th>상위 10% 평균</th>
									<td class="taL">89점</td>
								</tr>
								<tr>
									<th>상위 30% 평균</th>
									<td class="taL">77점</td>
								</tr>
								<tr>
									<th>전체 평균</th>
									<td class="taL">64.6점</td>
								</tr>
							</tbody>
						</table>
						
					</div>
					<!-- // mo-only -->

					<div class="table-noti">
						※ 상위 집단 점수는 해당 모의고사를 응시한<br class="mo-only">  전체 응시자의 원점수를 기준으로 산출됩니다.
					</div>
					<div class="main-score-list">
						<div>
							<div class="score-list">
								<em>수능 예상 표준점수</em>
								<span class="score"><strong>135</strong>점</span>
							</div>						
						</div>
						<div>
							<div class="score-list">
								<em>수능 예상 백분위</em>
								<span class="score"><strong>92</strong>점</span>
							</div>						
						</div>
						<div>
							<div class="score-list">
								<em>수능 예상 등급</em>
								<span class="score"><strong>2</strong>등급</span>
							</div>						
						</div>
					</div>
					<div class="table-noti">
						※ 수능예상성적은 메가스터디 회원의 모의고사와<br class="mo-only"> 수능 성적DB를 매칭 및 분석한 결과 값으로<br class="mo-only"> 실제 수능 점수와 다를 수 있습니다.
					</div>
				</div>
	
				<h3>회차별 나의 점수 분석</h3>

				<div class="popup-border-box">

					<div class="legend-box" id="legend-container"></div><!-- HTML 기반 범례 추가 -->
					<div class="graph-container-width">
						<div class="graph-section">
							<canvas id="scoreChart"></canvas>
						</div>
					</div>

					<div class="popup-table score-analysis">
						<div class="table-container-width">
							<div class="table-container score-table-1">
								<div class="table-row header">
									<div class="cell-1">
										<div class="cell">응시<br>회차</div>
									</div>
									<div class="cell-2">
										<div class="cell blue-grey">나의 점수</div>
										<div class="cell">
											<div class="cell">원점수</div>
											<div class="cell">예상 표준점수</div>
											<div class="cell">예상 백분위</div>
											<div class="cell">예상 등급</div>
										</div>
									</div>
								</div>
	
								<div class="table-row">
									<div class="cell">1회</div>
									<div class="cell">34점</div>
									<div class="cell">48점</div>
									<div class="cell">33</div>
									<div class="cell">6등급</div>
								</div>
								<div class="table-row">
									<div class="cell">2회</div>
									<div class="cell">42점</div>
									<div class="cell">54점</div>
									<div class="cell">68</div>
									<div class="cell">4등급</div>
								</div>
								<div class="table-row">
									<div class="cell">3회</div>
									<div class="cell">34점</div>
									<div class="cell">45점</div>
									<div class="cell">60</div>
									<div class="cell">4등급</div>
								</div>
							</div>
							<div class="table-container score-table-2">
								<div class="table-row header">
									<div class="cell-2">
										<div class="cell blue-grey">상위 집단별 평균점수</div>
										<div class="cell">
											<div class="cell">상위 10%</div>
											<div class="cell">상위 30%</div>
											<div class="cell primary-main">전체 평균</div>
										</div>
									</div>
								</div>
								<div class="table-row">
									<div class="cell">98점</div>
									<div class="cell">93점</div>
									<div class="cell primary-main">69.5점</div>
								</div>
								<div class="table-row">
									<div class="cell">98점</div>
									<div class="cell">91점</div>
									<div class="cell primary-main">66.8점</div>
								</div>
								<div class="table-row">
									<div class="cell">100점</div>
									<div class="cell">92점</div>
									<div class="cell primary-main">67.4점</div>
								</div>
							</div>
						</div>
					</div>

					<div class="table-noti">
						※ 상위 집단 점수는 해당 모의고사를 응시한<br class="mo-only"> 전체 응시자의 원점수를 기준으로 산출됩니다.
					</div>
				</div>

				<h3>문항별 나의 점수 분석</h3>

				<div class="popup-border-box">
					<div class="popup-table question-analysis">
						
						<div class="table-container question-table-1">
							<div class="table-caption blind">OMEGA 모의고사 성적표</div>
							<div class="table-row header">
								<div class="cell-1"><div class="cell">문항<br>번호</div></div>
								<div class="cell-1"><div class="cell">단원</div></div>
								<div class="cell-1"><div class="cell">배점</div></div>
								<div class="cell-1"><div class="cell">정답</div></div>
								<div class="cell-1"><div class="cell">내<br>답안</div></div>
								<div class="cell-1"><div class="cell">나의<br>정오</div></div>
								<div class="cell-1"><div class="cell">정답률</div></div>
								<div class="cell-2">
									<div class="cell blue-grey">선지별 반응률</div>
									<div class="cell">
										<div class="cell">①</div>
										<div class="cell">②</div>
										<div class="cell">③</div>
										<div class="cell">④</div>
										<div class="cell">⑤</div>
									</div>
								</div>
								<div class="cell-3">
									<div class="cell blue-grey">상위 집단별 평균 정답률</div>
									<div class="cell">
										<div class="cell wide">상위 10%</div>
										<div class="cell wide">상위 30%</div>
									</div>
								</div>
							</div>
							<div class="table-row">
								<div class="cell">1</div>
								<div class="cell">지수함수와 로그함수</div>
								<div class="cell">2</div>
								<div class="cell">2</div>
								<div class="cell">3</div>
								<div class="cell red-color">X</div>
								<div class="cell">86%</div>

								<div class="cell">1%</div>
								<div class="cell">1%</div>
								<div class="cell">2%</div>
								<div class="cell">2%</div>
								<div class="cell">94%</div>
								
								<div class="cell wide">100%</div>
								<div class="cell wide">100%</div>
							</div>
							<div class="table-row">
								<div class="cell">1</div>
								<div class="cell">지수함수와 로그함수</div>
								<div class="cell">2</div>
								<div class="cell">2</div>
								<div class="cell">3</div>
								<div class="cell red-color">X</div>
								<div class="cell">86%</div>

								<div class="cell">1%</div>
								<div class="cell">1%</div>
								<div class="cell">2%</div>
								<div class="cell">2%</div>
								<div class="cell">94%</div>
								
								<div class="cell wide">100%</div>
								<div class="cell wide">100%</div>
							</div>
							<div class="table-row">
								<div class="cell">1</div>
								<div class="cell clamp">지수함수와 로그함수지수함수와 로그함수</div>
								<div class="cell">2</div>
								<div class="cell">2</div>
								<div class="cell">3</div>
								<div class="cell red-color">X</div>
								<div class="cell">86%</div>

								<div class="cell">1%</div>
								<div class="cell">1%</div>
								<div class="cell">2%</div>
								<div class="cell">2%</div>
								<div class="cell">94%</div>
								
								<div class="cell wide">100%</div>
								<div class="cell wide">100%</div>
							</div>
							<div class="table-row">
								<div class="cell">1</div>
								<div class="cell clamp">다항함수의 미분법</div>
								<div class="cell">2</div>
								<div class="cell">2</div>
								<div class="cell">3</div>
								<div class="cell blue-color">O</div>
								<div class="cell">86%</div>

								<div class="cell">1%</div>
								<div class="cell">1%</div>
								<div class="cell">2%</div>
								<div class="cell">2%</div>
								<div class="cell">94%</div>
								
								<div class="cell wide">100%</div>
								<div class="cell wide">100%</div>
							</div>
							<div class="table-row">
								<div class="cell">1</div>
								<div class="cell clamp">지수함수와 로그함수</div>
								<div class="cell">2</div>
								<div class="cell">2</div>
								<div class="cell">3</div>
								<div class="cell red-color">X</div>
								<div class="cell">86%</div>

								<div class="cell">1%</div>
								<div class="cell">1%</div>
								<div class="cell">2%</div>
								<div class="cell">2%</div>
								<div class="cell">94%</div>
								
								<div class="cell wide">100%</div>
								<div class="cell wide">100%</div>
							</div>
						</div> 
						
					</div>
				</div>

				<h3>단원별 성적 분석</h3>

				<div class="popup-border-box">
					<div class="popup-table unit-analysis">
						<div class="table-container unit-table-1">
							<div class="table-caption blind">OMEGA 모의고사 성적표</div>
							<div class="table-row header">

								<div class="cell-1"><div class="cell" rowspan="2">평가요소</div></div>
								<div class="cell-1"><div class="cell" rowspan="2">배점</div></div>
								<div class="cell-1"><div class="cell" rowspan="2">나의 득점</div></div>

								<div class="cell-2">
									<div class="cell blue-grey">상위 집단별 평균점수</div>
									<div class="cell">
										<div class="cell">상위 10%</div>
										<div class="cell">상위 30%</div>
										<div class="cell">전체 평균</div>
									</div>
								</div>
								<div class="cell-3"><div class="cell double" rowspan="2">문항 번호</div></div>
							</div>

							<div class="table-row">
								<div class="cell clamp">지수함수와 로그함수</div>
								<div class="cell">38</div>
								<div class="cell">21</div>

								<div class="cell">37.3</div>
								<div class="cell">33.8</div>
								<div class="cell">22.7</div>

								<div class="cell double taL">1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17</div>
							</div>

							<div class="table-row">
								<div class="cell clamp">다항함수의 미분법</div>
								<div class="cell">38</div>
								<div class="cell">18</div>

								<div class="cell">38.0</div>
								<div class="cell">33.8</div>
								<div class="cell">22.7</div>

								<div class="cell double taL">18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34</div>
							</div>

							<div class="table-row">
								<div class="cell clamp">지수함수와 로그함수지수함수와 로그함수지수함수와 로그함수</div>
								<div class="cell">11</div>
								<div class="cell">9</div>

								<div class="cell">11.0</div>
								<div class="cell">33.8</div>
								<div class="cell">22.7</div>

								<div class="cell double taL">35,36,37,38,39</div>
							</div>

							<div class="table-row">
								<div class="cell clamp">지수함수와 로그함수</div>
								<div class="cell">13</div>
								<div class="cell">8</div>

								<div class="cell">37.3</div>
								<div class="cell">33.8</div>
								<div class="cell">22.7</div>

								<div class="cell double taL">40,41,42,43,44,45</div>
							</div>

							<div class="table-row primary-main">
								<div class="cell primary-main">합계</div>
								<div class="cell primary-main">100</div>
								<div class="cell primary-main">56</div>

								<div class="cell primary-main">98.6</div>
								<div class="cell primary-main">94.3</div>
								<div class="cell primary-main">70.3</div>

								<div class="cell double taL"></div>
							</div>
						</div>
					</div>
					<div class="table-noti">
						※ 집계된 채점 데이터 수에 따라 등급컷 차이가 있을 수 있습니다.
					</div>

				</div> 

			</div>
		</div>

    </div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		const ctx = document.getElementById('scoreChart').getContext('2d');

		// HTML 범례 플러그인 (기존 코드 유지)
		const htmlLegendPlugin = {
			id: 'htmlLegend',
			afterUpdate(chart, args, options) {
				const ul = document.getElementById(options.containerID);
				ul.innerHTML = ''; // 기존 범례 초기화

				const items = chart.options.plugins.legend.labels.generateLabels(chart);

				items.forEach(item => {
					const li = document.createElement('li');
					li.style.display = 'flex';
					li.style.alignItems = 'center';
					li.style.cursor = 'pointer';
					li.style.marginRight = '15px';

					li.onclick = () => {
						chart.setDatasetVisibility(item.datasetIndex, !chart.isDatasetVisible(item.datasetIndex));
						chart.update();
					};

					// 색상 원
					const boxSpan = document.createElement('span');
					boxSpan.style.background = item.fillStyle;
					boxSpan.style.borderColor = item.strokeStyle;
					boxSpan.style.borderWidth = item.lineWidth + 'px';
					boxSpan.style.display = 'inline-block';
					boxSpan.style.width = '6px';
					boxSpan.style.height = '6px';
					boxSpan.style.borderRadius = '50%'; // 원 형태
					boxSpan.style.marginRight = '4px';

					// 텍스트
					const text = document.createElement('span');
					text.textContent = item.text;
					text.style.fontFamily = 'Pretendard';
					text.style.fontSize = '12px';
					text.style.textDecoration = item.hidden ? 'line-through' : '';

					li.appendChild(boxSpan);
					li.appendChild(text);
					ul.appendChild(li);
				});
			}
		};

		// Chart.js 인스턴스 생성
		new Chart(ctx, {
			type: 'line',
			data: {
				labels: ['1회', '2회', '3회', '4회', '5회', '6회'],
				datasets: [
					{
						label: '나의 원점수',
						data: [50, 48, 46, 48, 48, 48],
						borderColor: '#9D4BFF',
						backgroundColor: 'rgba(157, 75, 255, 0.1)',
						borderWidth: 1.5, // 선 두께 줄임
						tension: 0.1,
						fill: true,
						pointBackgroundColor: '#9D4BFF',
						pointBorderColor: '#fff',
						pointBorderWidth: 0
					},
					{
						label: '전체 평균',
						data: [34.9, 39.1, 35.2, 37.3, 35.5, 33.6],
						borderColor: '#5671FF',
						backgroundColor: 'rgba(86, 113, 255, 0.1)',
						borderWidth: 1.5, // 선 두께 줄임
						tension: 0.1,
						fill: true,
						pointBackgroundColor: '#5671FF',
						pointBorderColor: '#fff',
						pointBorderWidth: 0
					}
				]
			},
			options: {
				responsive: true,
				maintainAspectRatio: false,
				scales: {
					y: {
						beginAtZero: true,
						max: 100,
						ticks: {
							stepSize: 50,
							font: {
								size: 12,
								family: 'Pretendard'
							}
						}
					},
					x: {
						ticks: {
							font: {
								size: 12,
								family: 'Pretendard'
							}
						}
					}
				},
				plugins: {
					htmlLegend: {
						containerID: 'legend-container' // HTML 범례 유지
					},
					legend: {
						display: false // 기본 Chart.js 범례 숨기기
					},
					datalabels: {  // 데이터 라벨 추가
						align: 'top',
						anchor: 'end',
						color: '#333',
						font: {
							size: 10,
							family: 'Pretendard'
						},
						formatter: function(value) {
							return value; // 데이터 값 표시
						}
					}
				}
			},
			plugins: [htmlLegendPlugin, ChartDataLabels]  // 두 개의 플러그인 적용
		});
	});
</script>

</body>
</html>
